{
	"fileVersion": "1.0",
	"fileLocation": "https://raw.githubusercontent.com/IBM/cp4ba-client-onboarding-scenario/main/21.0.3/Deployment%20Automation/Enterprise/DeployClientOnboardingEmbeddedGitea.json",
	"requiredToolVersion": ">=1.0.0 <1.1.0",
	"requiredCP4BAVersion": ">=21.3.0 <22.1.0",
	"requiredCP4BAPattern": "Enterprise",
	
	"actions": [
		{
			"CONTAINER": {
				"enabled": "$enableDeployClientOnboarding$",
				"description": "Deploy Client Onboarding Scenario",
				"actions": [
					{
						"OPS": {
							"enabled": "$enableDeployClientOnboarding_OPS$",
							"description": "Create OPS model, attach binary model, and test prediction",
							"name": "service-payment-default-risk",
							"relativeBasePath": "1_OPS",
							"subActions": [
								{
									"DOWNLOADRESOURCES": {
										"enabled": "$enableArtifactDownloadFromGit$",
										"description": "Download resources required for OPS",
   										"name": "Download OPS files",
   										"replaceExistingFiles": true,
   										"files": [
    										{"url": "https://raw.githubusercontent.com/IBM/cp4ba-client-onboarding-scenario/main/$cp4baVersion$/Solution%20Exports/Automation%20Decision%20Services/ML/addModel.json"},
    										{"url": "https://github.com/IBM/cp4ba-client-onboarding-scenario/raw/main/$cp4baVersion$/Solution%20Exports/Automation%20Decision%20Services/ML/service-payment-default-risk-v0-archive.pkl"},
    										{"url": "https://raw.githubusercontent.com/IBM/cp4ba-client-onboarding-scenario/main/$cp4baVersion$/Solution%20Exports/Automation%20Decision%20Services/ML/runModel.json"},
    										{"url": "https://raw.githubusercontent.com/IBM/cp4ba-client-onboarding-scenario/main/$cp4baVersion$/Solution%20Exports/Automation%20Decision%20Services/ML/runModelExpectedResult.json"}
   										]
  									}
  								},
  								{
									"TESTCONNECTION": {
										"enabled": "true",
										"description": "Test connection to OPS"
									}
								},
								{
									"CREATEMODEL": {
										"enabled": "true",
										"description": "Create OPS model",
										"file": "addModel.json"
									}
								},
								{
									"ADDBINARY": {
										"enabled": "true",
										"description": "Attach binary implementation to model",
										"file": "service-payment-default-risk-v0-archive.pkl"
									}
								},
								{
									"TESTPREDICTION": {
										"enabled": "true",
										"description": "Test prediction for deployed model",
										"inputFile": "runModel.json",
										"compareFile": "runModelExpectedResult.json"
									}
								}
							]
						}
					},
					{
						"ADS": {
							"enabled": "$enableDeployClientOnboarding_ADS$",
							"description": "Create ADS and fully configure ADS project including Git, Deploy, & Publish",
							"decisionsPrjDisplayName": "Client Onboarding",
							"relativeBasePath": "2_ADS",
							"maxBASQueryRetries": 5,
							"subActions": [
								{
									"DOWNLOADRESOURCES": {
										"enabled": "$enableArtifactDownloadFromGit$",
										"description": "Download resources required for ADS",
   										"name": "Download ADS file",
   										"replaceExistingFiles": true,
   										"files": [
    										{"url": "https://github.com/IBM/cp4ba-client-onboarding-scenario/raw/main/$cp4baVersion$/Solution%20Exports/Automation%20Decision%20Services/ClientOnboardingDecisions.zip"}
   										]
  									}
  								},
  								{
									"TESTCONNECTION": {
										"enabled": "true",
										"description": "Test ADS capability"
									}
								},
								{
									"CREATEGITREPO": {
										"enabled": "true",
										"description": "Create Git org and repo in internal Gitea",
										"orgName": "$adsGitOrg$",
										"repoName": "$adsGitRepo$",
										"repoDescription": "$adsGitRepoDescription$"
									}
								},
								{
									"CREATEPROJECT": {
										"enabled": "true",
										"description": "Create ADS project in Studio",
										"name": "Client-Onboarding"
									}
								},
								{
									"IMPORTDECISIONSERVICES": {
										"enabled": "true",
										"description": "Import 'Client Onboarding Decisions' decision service",
										"decisionServiceName": "Client Onboarding Decisions",
										"file": "ClientOnboardingDecisions.zip"
									}
								},
								{
									"CONNECTWITHGIT": {
										"enabled": "true",
										"description": "Connect ADS project to internal gitea repository",
										"gitRepoUrl": "!GITREPOURL!"
									}
								},
								{
									"CONNECTPROJECTTOMLPROVIDER": {
										"enabled": "true",
										"description": "Create an ML provider within the ADS project",
										"name": "OPS",
										"mlServiceUrl": "$MLSERVICEPROVIDERURL$",
										"mlProviderType": "OPS"
									}
								},
								{
									"CONNECTDSMODELTOMLPROVIDER": {
										"enabled": "true",
										"description": "Connect the descriptive model to the ML provider",
										"decisionServiceName": "Client Onboarding Decisions",
										"modelName": "Machine learning scoreboard",
										"mlProviderName": "OPS",
										"mlModelName": "service-payment-default-risk",
										"mlDeploymentName": "service-payment-default-risk",
										"testPredictionInput": "{\"clientAnnualRevenue\":15708854,\"clientExistenceDuration\":12,\"clientEmployeeNumber\":3,\"clientIndustry\":0}",
										"testPredictionExpectedOutput": {
											"result": {
												"predictions": 1,
												"scores": [
													0.014675209287711933,
													0.9853247907122881
												]
											}
										}
									}
								},
								{
									"COMMITCHANGES": {
										"enabled": "true",
										"description": "Commit changes in ADS project to git",
										"commitMessage": "Initial automatic setup of Client Onboarding project",
										"maxCommitCompletionPolls": 20,
										"delayBetweenCommitCompletionPolls": 10
									}
								},
								{
									"VERSIONPROJECT": {
										"enabled": "true",
										"description": "Create a new version of the ADS project",
										"versionDescription": "Initial version of the Client Onboarding Decision Solution",
										"version": "v21"
									}
								},
								{
									"DEPLOYPROJECT": {
										"enabled": "true",
										"description": "Deploy the version to the runtime",
										"version": "v21",
										"maxDeployCompletionPolls": 60,
										"delayBetweenDeployCompletionPolls": 5
									}
								},
								{
									"PUBLISHAUTOMATIONSERVICES": {
										"enabled": "true",
										"description": "Publish the ADS decision service as an automation service",
										"snapshot": "v21",
										"maxPublishCompletionPolls": 20,
										"delayBetweenPublishCompletionPolls": 5
									}
								}
							]
						}
					},
					{
						"ADP": {
							"enabled": "$enableDeployClientOnboarding_ADP$",
							"description": "Configure and deploy the ADP project for usage with Client Onboarding and determine the project Id",
							"skipRemainingSubactionOnFailure" : "true",
							"relativeBasePath": "3_ADP",
							"objectStoreName": "$adpObjectStore$",
							"projectDisplayName": "$adpProjectName$",
							"projectAcronym" : "$adpProjectAcronym$",
							"subActions": [
								{
									"TESTCONNECTION": {
										"enabled": "true",
										"description": "Test ADP capability"
									}
								},
								{
									"SETMARKFORDEPLOYMENT": {
										"enabled": "true",
										"description": "Mark the UtilityBill class for deployment",
										"setUndeployForOthers": true,
										"types": [
											"UtilityBill"
										]
									}
								},
								{
									"DEFINEPROPERTIES": {
										"enabled": "true",
										"description": "Define the CustomerName and ServiceAddress property definitions",
										"propertyDefinitionsByType": {
											"UtilityBill": {
												"CustomerName": "ddCustomerName",
												"ServiceAddress": "ddServiceAddress"
											}
										}
									}
								},
								{
									"CREATEVERSION": {
										"enabled": "true",
										"description": "Create a new version of the ADP project",
										"versionComment": "Enabled Utility Bill and marked Customer Name and Service Address for deployment",
										"maxPollTimes": 20,
										"maxDelayBetweenPolls": 10
									}
								},
								{
									"DEPLOYVERSION": {
										"enabled": "true",
										"description": "Deploy the version of the ADP project",
										"maxPollTimes": 20,
										"maxDelayBetweenPolls": 10
									}
								},
								{
									"GETPROJECTID": {
										"enabled": "true",
										"description": "Get the project id of the deployed ADP project"
									}
								}
							]
						}
					},
					{
						"WF": {
							"enabled": "$enableDeployClientOnboarding_WF$",
							"description": "Configure, install, and deploy the Client Onboarding WF solution and publish its Automation Service",
							"relativeBasePath": "5_WF",
							"subActions": [
								{
									"DOWNLOADRESOURCES": {
										"enabled": "$enableArtifactDownloadFromGit$",
										"description": "Download resources required for WF",
   										"name": "Download Workflow file",
   										"replaceExistingFiles": true,
   										"files": [
    										{"url": "https://github.com/IBM/cp4ba-client-onboarding-scenario/raw/main/$cp4baVersion$/Solution%20Exports/Business%20Automation%20Workflow/Client_Onboarding.twx"},
    										{"url": "https://raw.githubusercontent.com/IBM/cp4ba-client-onboarding-scenario/main/21.0.3/Solution%20Exports/Business%20Automation%20Workflow/1_publishConnectionnAssetWithoutProject.json"},
    										{"url": "https://raw.githubusercontent.com/IBM/cp4ba-client-onboarding-scenario/main/21.0.3/Solution%20Exports/Business%20Automation%20Workflow/2_addRemoteCallableItemToProject.json"},
    										{"url": "https://raw.githubusercontent.com/IBM/cp4ba-client-onboarding-scenario/main/21.0.3/Solution%20Exports/Business%20Automation%20Workflow/3_publishCommonAsset.json"},
    										{"url": "https://raw.githubusercontent.com/IBM/cp4ba-client-onboarding-scenario/main/21.0.3/Solution%20Exports/Business%20Automation%20Workflow/4_setPermissions.json"},
    										{"url": "https://raw.githubusercontent.com/IBM/cp4ba-client-onboarding-scenario/main/21.0.3/Solution%20Exports/Business%20Automation%20Workflow/5_publishConnectionnAssetWithProject.json"}
   										]
  									}
  								},
								{
									"EXTRACTTWXPROJECTINFO": {
										"enabled": "true",
										"description": "Extract the project information from the Client Onboarding TWX file",
										"sourceTwxFile": "Client_Onboarding.twx",
										"additionalIds": [
											{
												"label": "serviceFlow",
												"name": "New Client Onboarding Request",
												"type": "bpd",
												"getObjectId": true,
												"getVersionId": false
											}
										]
									}
								},
								{
									"PATCHSOLUTION": {
										"enabled": "true",
										"description": "Patch the Environment Variables, especially enable/disable ADP depending on availability of ADP project ID",
										"sourceTwxFile": "!twxFileName!",
										"environmentVariables": [
											{
												"adpEnabled": "$wf_cp_adpEnabled$ && $adpProjectId$default=!adpProjectId!default=false"
											},
											{
												"adpHost": "$adpHost$default=!adpHost!default="
											},
											{
												"adpUsername": "$adpUsername$default=!adpUsername!default="
											},
											{
												"adpPassword": "$adpPassword$default=!adpPassword!default="
											},
											{
												"adpProjectID": "$adpProjectId$default=!adpProjectId!default="
											},
											{
												"documentUploadPage": "$wf_cp_documentUploadPage$"
											},
											{
												"emailID": "$wf_cp_emailID$"
											},
											{
												"emailPassword": "$wf_cp_emailPassword$"
											},
											{
												"rpaBotExecutionUser": "$wf_cp_rpaBotExecutionUser$"
											},
											{
												"rpaServer": "$wf_cp_rpaServer$"
											},
											{
												"tosName": "$BAW_TOS$"
											}
										]
									}
								},
								{
									"INSTALLSOLUTION": {
										"enabled": "true",
										"description": "Install the patched Client Onboarding WF solution",
										"twxFile": "!patchedTWXFileName!",
										"paAcronym": "!projectAcronym!",
										"paSnapshot": "!snapshotAcronym!"
									}
								},
								{
									"DEPLOYCASESOLUTION": {
										"enabled": "true",
										"description": "Deploy the Case part of the Client Onboarding WF solution",
										"solutionName": "!solutionName!",
										"solutionAcronym": "!solutionAcronym!",
										"dosName": "$BAW_DOS$",
										"maxDeployCompletionPolls": 20,
										"delayBetweenDeployCompletionPolls": 5
									}
								},
								{
									"PUBLISHAUTOMATIONSERVICES": {
										"enabled": "true",
										"description": "Publish the Client Onboarding WF Automation Service",
										"solutionName": "!solutionName!",
										"solutionAcronym": "!solutionAcronym!",
										"snapshot": "!snapshotAcronym!",
										"maxBASQueryRetries": 5,
										"maxPublishCompletionPolls": 20,
										"delayBetweenPublishCompletionPolls": 5
									}
								},
								{
									"ADDCOLLABORATORS": {
										"enabled": "true",
										"name": "Client Onboarding Toolkit",
										"type": "WF_TK",
										"maxBASQueryRetries": 5,
										"principals": [
											{
												"name": "$generalUsersGroupNameShort$",
												"type": "group",
												"permissions": {
													"read": true,
													"write": false,
													"administration": false
												}
											}
										]
									}
								},
								{
									"CREATEEXTERNALAUTOMATIONSERVICE": {
										"enabled": "true",
										"description": "Creates the 'Client_Onboarding_Workflows_External' external Automation Service",
										"externalServiceName": "Client_Onboarding_Workflows_External",
										"connectionName": "External BAW System",
										"externalServerUrl": "$bawAuthURL$",
										"externalServerUser": "$cp4baAdminUsr$",
										"externalServerPwd": "$cp4baAdminPwd$",
										"publishConnectionTemplate1" : "1_publishConnectionnAssetWithoutProject.json",
										"createAutomationServiceTemplate": "2_addRemoteCallableItemToProject.json",
										"publishAutomationServiceTemplate": "3_publishCommonAsset.json",
										"setPermissionsTemplate": "4_setPermissions.json",
										"publishConnectionTemplate2": "5_publishConnectionnAssetWithProject.json",
										"maxBASQueryRetries": 4
									}
								}
							]
						}
					},
					{
						"FNCM": {
							"enabled": "$enableDeployClientOnboarding_FNCM$",
							"description": "Set Document Class Security for Client Onboarding document classes, create and populate Client documents folder",
							"replaceExistingDocuments": false,
							"objectStoreName": "$BAW_TOS$",
							"relativeBasePath": "6_FNCM",
							"subActions": [
								{
									"DOWNLOADRESOURCES": {
										"enabled": "$enableArtifactDownloadFromGit$",
										"description": "Download resources required for FNCM",
   										"name": "Download FNCM files",
   										"replaceExistingFiles": true,
   										"files": [
    										{"url": "https://github.com/IBM/cp4ba-client-onboarding-scenario/raw/main/$cp4baVersion$/Solution%20Exports/FileNet%20Content%20Manager/Client%20Documents/Banking%20Information%20-%20Automation%20Elite%20Inc.pdf"},
    										{"url": "https://github.com/IBM/cp4ba-client-onboarding-scenario/raw/main/$cp4baVersion$/Solution%20Exports/FileNet%20Content%20Manager/Client%20Documents/Certificate%20of%20Incorporation%20-%20Automation%20Elite%20Inc.pdf"},
    										{"url": "https://github.com/IBM/cp4ba-client-onboarding-scenario/raw/main/$cp4baVersion$/Solution%20Exports/FileNet%20Content%20Manager/Client%20Documents/Utility%20Bill%20-%20Automation%20Elite%20Inc.pdf"},
    										{"url": "https://github.com/IBM/cp4ba-client-onboarding-scenario/raw/main/$cp4baVersion$/Solution%20Exports/FileNet%20Content%20Manager/Client%20Documents/June%20Marie%20-%20Driver's%20License.png"},
    										{"url": "https://github.com/IBM/cp4ba-client-onboarding-scenario/raw/main/$cp4baVersion$/Solution%20Exports/FileNet%20Content%20Manager/Client%20Documents/Legacy%20Consulting%20-%20Banking%20Information.pdf"},
    										{"url": "https://github.com/IBM/cp4ba-client-onboarding-scenario/raw/main/$cp4baVersion$/Solution%20Exports/FileNet%20Content%20Manager/Client%20Documents/Legacy%20Consulting%20-%20Certificate%20of%20Incorporation.pdf"}
   										]
  									}
  								},
  								{
									"TESTCONNECTION": {
										"enabled": "true",
										"description": "Test FNCM availability"
									}
								},
								{
									"MODIFYCLASSSECURITY": {
										"enabled": "true",
										"description": "Update instance security and security settings for doc classes CO_ClientDocument, CO_BankingInformation, CO_UtilityBill for multi-user environment",
										"name": "Modify security for Client Onboarding classes",
										"classes": [
											{
												"enabled": "true",
												"classSymbolicName": "Document/CO_ClientDocument",
												"securityReplaceAccessRights": false,
												"granteeSettings": [
													{
														"enabled": "true",
														"granteeName": "$generalUsersGroupNameFull$",
														"granteeType": "Group",
														"defaultInstanceSecurityAction": "Remove",
														"securityAction": "Update",
														"securityAccessType": "Allow",
														"securityInheritableDepth": "No inheritance",
														"securityAccessRights": "Modify properties"
													}
												]
											},
											{
												"enabled": "true",
												"classSymbolicName": "Document/CO_ClientDocument/CO_BankingInformation",
												"securityReplaceAccessRights": false,
												"granteeSettings": [
													{
														"enabled": "true",
														"granteeName": "$generalUsersGroupNameFull$",
														"granteeType": "Group",
														"defaultInstanceSecurityAction": "Remove",
														"securityAction": "Update",
														"securityAccessType": "Allow",
														"securityInheritableDepth": "No inheritance",
														"securityAccessRights": "Modify properties"
													}
												]
											},
											{
												"enabled": "true",
												"classSymbolicName": "Document/CO_ClientDocument/CO_UtilityBill",
												"securityReplaceAccessRights": false,
												"granteeSettings": [
													{
														"enabled": "true",
														"granteeName": "$generalUsersGroupNameFull$",
														"granteeType": "Group",
														"defaultInstanceSecurityAction": "Remove",
														"securityAction": "Update",
														"securityAccessType": "Allow",
														"securityInheritableDepth": "No inheritance",
														"securityAccessRights": "Modify properties"
													}
												]
											}
										]
									}
								},
								{
									"CREATEFOLDER": {
										"enabled": "true",
										"description": "Create 'CLient documents' folder",
										"parentFolderPath": "/",
										"folderClassSymbolicName": "Folder",
										"folderName": "Client Documents"
									}
								},
								{
									"CREATEDOCUMENT": {
										"enabled": "true",
										"description": "Create 'Banking Information - Automation Elite Inc' doc",
										"replaceExistingDocument": false,
										"folderName": "/Client Documents",
										"docClass": "CO_BankingInformation",
										"docTitle": "Banking Information - Automation Elite Inc",
										"docProps": 
											{
												"CO_ClientName": "Automation Elite Inc.",
												"CO_AccountNumber": "1179476345"
											},
										"file": "Banking Information - Automation Elite Inc.pdf",
										"fileContentType": "application/pdf"
									}
								},
								{
									"CREATEDOCUMENT": {
										"enabled": "true",
										"description": "Create 'Certificate of Incorporation - Automation Elite Inc' doc",
										"replaceExistingDocument": false,
										"folderName": "/Client Documents",
										"docClass": "CO_ClientDocument",
										"docTitle": "Certificate of Incorporation - Automation Elite Inc",
										"docProps": 
											{
												"CO_ClientName": "Automation Elite Inc."
											},
										"file": "Certificate of Incorporation - Automation Elite Inc.pdf",
										"fileContentType": "application/pdf"
									}
								},
								{
									"CREATEDOCUMENT": {
										"enabled": "true",
										"description": "Create 'Utility Bill - Automation Elite Inc' doc",
										"replaceExistingDocument": false,
										"folderName": "/Client Documents",
										"docClass": "CO_UtilityBill",
										"docTitle": "Utility Bill - Automation Elite Inc",
										"docProps": 
											{
												"CO_ClientName": "Automation Elite Inc.",
												"CO_ServiceAddress": "3974 Carson St, Lansing, MI 48911"
											},
										"file": "Utility Bill - Automation Elite Inc.pdf",
										"fileContentType": "application/pdf"
									}
								},
								{
									"CREATEDOCUMENT": {
										"enabled": "true",
										"description": "Create 'June Marie - Driver's License' doc",
										"replaceExistingDocument": false,
										"folderName": "/Client Documents",
										"docClass": "CO_ClientDocument",
										"docTitle": "June Marie - Driver's License",
										"docProps": 
											{
												"CO_ClientName": "Automation Elite Inc."
											},
										"file": "June Marie - Driver's License.png",
										"fileContentType": "image/png"
									}
								},
								{
									"CREATEDOCUMENT": {
										"enabled": "true",
										"description": "Create 'Legacy Consulting - Banking Information' doc",
										"replaceExistingDocument": false,
										"folderName": "/Client Documents",
										"docClass": "CO_BankingInformation",
										"docTitle": "Legacy Consulting - Banking Information",
										"docProps": 
											{
												"CO_ClientName": "Legacy Consulting",
												"CO_AccountNumber": "7250512345"
											},
										"file": "Legacy Consulting - Banking Information.pdf",
										"fileContentType": "application/pdf"
									}
								},
								{
									"CREATEDOCUMENT": {
										"enabled": "true",
										"description": "Create 'Legacy Consulting - Certificate of Incorporation' doc",
										"replaceExistingDocument": false,
										"folderName": "/Client Documents",
										"docClass": "CO_ClientDocument",
										"docTitle": "Legacy Consulting - Certificate of Incorporation",
										"docProps":
											{
												"CO_ClientName": "Legacy Consulting"
											},
										"file": "Legacy Consulting - Certificate of Incorporation.pdf",
										"fileContentType": "application/pdf"
									}
								}
							]
						}
					},
					{
						"ICN": {
							"enabled": "$enableDeployClientOnboarding_BAA$",
							"description": "Import Client Onboarding Request and Client Onboarding Document Upload apps and set permissions and import Client Onboarding Request and Client Onboarding Document Upload desktops",
							"name": "Prepare Apps and Desktops",
							"relativeBasePath": "7_ICN",
							"subActions": [
								{
									"DOWNLOADRESOURCES": {
										"enabled": "$enableArtifactDownloadFromGit$",
										"description": "Download resources required for Navigator",
   										"name": "Download ICN files",
   										"replaceExistingFiles": true,
   										"files": [
    										{"url": "https://github.com/IBM/cp4ba-client-onboarding-scenario/raw/main/$cp4baVersion$/Solution%20Exports/Business%20Automation%20Navigator/ClientOnboardingRequest.zip"},
    										{"url": "https://github.com/IBM/cp4ba-client-onboarding-scenario/raw/main/$cp4baVersion$/Solution%20Exports/Business%20Automation%20Navigator/ClientOnboardingDocumentUpload.zip"},
    										{"url": "https://github.com/IBM/cp4ba-client-onboarding-scenario/raw/main/$cp4baVersion$/Solution%20Exports/Business%20Automation%20Navigator/ClientOnboardingRequestDesktop.properties"},
    										{"url": "https://github.com/IBM/cp4ba-client-onboarding-scenario/raw/main/$cp4baVersion$/Solution%20Exports/Business%20Automation%20Navigator/CODocumentUploadDesktop.properties"}
   										]
  									}
  								},
  								{
									"TESTCONNECTION": {
										"enabled": "true",
										"description": "Test Navigator availability"
									}
								},
								{
									"IMPORTAPPLICATION": {
										"enabled": "true",
										"description": "Import patched 'Client Onbaording Request' app",
										"appEngineAppConfigName": "APPENG0",
										"name": "Client Onboarding Request",
										"file": "ClientOnboardingRequest.zip"
									}
								},
								{
									"IMPORTAPPLICATION": {
										"enabled": "true",
										"description": "Import 'Client Onboarding Document Upload' app",
										"appEngineAppConfigName": "APPENG0",
										"name": "Client Onboarding Document Upload",
										"file": "ClientOnboardingDocumentUpload.zip"
									}
								},
								{
									"SETAPPPERMISSIONS": {
										"enabled": "true",
										"description": "Make 'Client Onboarding Request' app accessible for all authenticated users",
										"appEngineAppConfigName": "APPENG0",
										"name": "Client Onboarding Request",
										"action": "update",
										"permissions": [
											{
												"name": "#AUTHENTICATED-USERS",
												"action": "add"
											}
										]
									}
								},
								{
									"SETAPPPERMISSIONS": {
										"enabled": "true",
										"description": "Make 'Client Onboarding Document Upload' app accessible for all authenticated users",
										"appEngineAppConfigName": "APPENG0",
										"name": "Client Onboarding Document Upload",
										"action": "update",
										"permissions": [
											{
												"name": "#AUTHENTICATED-USERS",
												"action": "add"
											}
										]
									}
								},
								{
									"IMPORTDESKTOP": {
										"enabled": "true",
										"description": "Import patched 'Client Onboarding Request' desktop",
										"enforceImport": false,
										"name": "Client Onboarding Request",
										"file": "ClientOnboardingRequestDesktop.properties"
									}
								},
								{
									"IMPORTDESKTOP": {
										"enabled": "true",
										"description": "Import patched 'Client Onboarding Document Upload' desktop",
										"enforceImport": false,
										"name": "Client Onboarding Document Upload",
										"file": "CODocumentUploadDesktop.properties"
									}
								}
							]
						}
					},
					{
						"BAI": {
							"enabled": "$enableDeployClientOnboarding_BAI$",
							"description": "Populate the ADS, Process, and Case indices, create Client Onboarding goal and dashboard, and make dashboard visible for all users",
							"relativeBasePath": "8_BAI",
							"subActions": [
								{
									"DOWNLOADRESOURCES": {
										"enabled": "$enableArtifactDownloadFromGit$",
										"description": "Download resources required for BAI",
   										"name": "Download BAI files",
   										"replaceExistingFiles": true,
   										"files": [
    										{"url": "https://github.com/IBM/cp4ba-client-onboarding-scenario/raw/main/$cp4baVersion$/Solution%20Exports/Business%20Automation%20Insights/case-data.json"},
    										{"url": "https://github.com/IBM/cp4ba-client-onboarding-scenario/raw/main/$cp4baVersion$/Solution%20Exports/Business%20Automation%20Insights/process-data.json"},
    										{"url": "https://github.com/IBM/cp4ba-client-onboarding-scenario/raw/main/$cp4baVersion$/Solution%20Exports/Business%20Automation%20Insights/ads-data.json"},
    										{"url": "https://github.com/IBM/cp4ba-client-onboarding-scenario/raw/main/$cp4baVersion$/Solution%20Exports/Business%20Automation%20Insights/Client%20Onboarding%20Completed.json"},
    										{"url": "https://github.com/IBM/cp4ba-client-onboarding-scenario/raw/main/$cp4baVersion$/Solution%20Exports/Business%20Automation%20Insights/finalDashboardLayout.json"}
   										]
  									}
  								},
  								{
									"TESTCONNECTION": {
										"enabled": "true",
										"description": "Test BAI capability"
									}
								},
								{
									"IMPORTDATA": {
										"enabled": "true",
										"description": "Populate Case data into ElasticSearch index",
										"clearUsedIndices": false,
										"name": "Case Data",
										"file": "case-data.json"
									}
								},
								{
									"IMPORTDATA": {
										"enabled": "true",
										"description": "Populate Process data into ElasticSearch index",
										"clearUsedIndices": false,
										"name": "Process Data",
										"file": "process-data.json"
									}
								},
								{
									"IMPORTDATA": {
										"enabled": "true",
										"description": "Populate ADS data into ElasticSearch index",
										"clearUsedIndices": false,
										"name": "ADS Data",
										"file": "ads-data.json"
									}
								},
								{
									"IMPORTDASHBOARD": {
										"enabled": "true",
										"description": "Import 'Client Onboarding Complete' dashboard",
										"name": "Client Onboarding Completed",
										"file": "Client Onboarding Completed.json",
										"keepId": false
									}
								},
								{
									"CREATEGOAL": {
										"enabled": "true",
										"description": "Create 'Client Onboarding KPI' goal",
										"goalName": "Focus Corp's top Client Onboarding KPI Completed",
										"goalDescription": "Focus on the three top KPI identified by senior management team",
										"goalCategory": "",
										"goalPriority": "High",
										"goalColor": "#6929c4"
									}
								},
								{
									"EXPORTFINALDASHBOARDLAYOUT": {
										"enabled": "false",
										"description": "Export the final layout after applying the goal manually to the dashboard (disabled by default)",
										"name": "Client Onboarding Completed",
										"file": "finalDashboardLayout.json"
									}
								},
								{
									"APPLYGOALSTOVISUALIZATIONS": {
										"enabled": "true",
										"description": "Apply the goal to the dashboard",
										"name": "Client Onboarding Completed",
										"layoutFile": "finalDashboardLayout.json",
										"visualizationGoalMapping": [
											{
												"visualizationName": "Average Revenue from Service Fees for Approved Clients",
												"goalName": "Focus Corp's top Client Onboarding KPI Completed"
											},
											{
												"visualizationName": "Highest Service Fee by Industry Sector",
												"goalName": "Focus Corp's top Client Onboarding KPI Completed"
											}
										]
									}
								},
								{
									"SETDASHBOARDVISIBILITY": {
										"enabled": "true",
										"description": "Make dashboard visible to all users",
										"name": "Client Onboarding Completed",
										"isShared": true
									}
								}
							]
						}
					}
				]
			}
		},
		{
			"CONTAINER": {
				"enabled": "$enableConfigureSWATLabs$",
				"description": "Apply additional steps to prepare environment for labs after Client Onboarding solution is deployed",
				"name": "Configure SWAT Labs",
				"actions": [
					{
						"WF": {
							"enabled": "$enableConfigureSWATLabs_WF$",
							"description": "Make Client Onboarding toolkit accessible to all users as reader",
							"relativeBasePath": "5_WF",
							"subActions": [
								{
									"ADDCOLLABORATORS": {
										"enabled": "true",
										"description": "Add the general user group to the collaborators of the Client Onboarding toolkit as reader",
										"name": "Client Onboarding Toolkit",
										"type": "WF_TK",
										"ignoreMissingPrincipals": true,
										"maxBASQueryRetries": 5,
										"principals": [
											{
												"name": "$generalUsersGroupNameShort$",
												"type": "group",
												"permissions": {
													"read": true,
													"write": false,
													"administration": false
												}
											}
										]
									}
								}
							]
						}
					},
					{
						"FNCM": {
							"enabled": "$enableConfigureSWATLabs_FNCM$",
							"description": "Update ObjectStore security, create Storage Policy, Property Templates, Folder Class, and create Folder for content lab",
							"replaceExistingDocuments": false,
							"objectStoreName": "CLOS",
							"relativeBasePath": "6_FNCM",
							"subActions": [
								{
									"MODIFYOBJECTSTORESECURITY": {
										"enabled": "true",
										"description": "Modify security for CLOS Object Store",
										"name": "Modify security for CLOS Object Store",
										"replaceAccessRights": false,
										"granteeSettings": [
											{
												"enabled": "true",
												"action": "Add",
												"granteeType": "Group",
												"granteeName": "$generalUsersGroupNameFull$",
												"accessType": "Allow",
												"inheritableDepth": "No inheritance",
												"accessRights": "Full control, !Set owner of any object, !Modify all properties"
											}
										]
									}
								},
								{
									"CREATESTORAGEPOLICY": {
										"enabled": "true",
										"description": "Create Storage Area Policy for the 'CLOS' object store and 'content_storage' ASA",
										"storagePolicyName": "Default Advanced Storage Area",
										"storageAreaName": "CLOS_asa"
									}
								},
								{
									"UPDATECLASSDEFINITION": {
										"enabled": "true",
										"description": "Update class definition for folder to enable content-based retrieval",
										"classSymbolicName": "Document",
										"enableCBR": true
									}
								},
								{
									"CREATEPROPERTYTEMPLATE": {
										"enabled": "true",
										"description": "Define two property templates 'Case Reference ID' & 'Client Name' for usage in new folder class",
										"propertyTemplates": [
											{
												"name": "Case Reference ID",
												"symbolicName": "Case_Reference_ID",
												"dataType": "String",
												"cardinality": "Single"
											},
											{
												"name": "Client Name",
												"symbolicName": "Client_Name",
												"dataType": "String",
												"cardinality": "Single"
											}
										]
									}
								},
								{
									"CREATECLASSDEFINITION": {
										"enabled": "true",
										"description": "Create new folder class 'SWAT Jam Case Folder' using previously created property templates",
										"className": "SWAT Jam Case Folder",
										"classSymbolicName": "SWAT_JAM_Case_Folder",
										"baseClassSymbolicName": "Folder",
										"propertyTemplateNames": [
											"Case_Reference_ID",
											"Client_Name"
										]
									}
								},
								{
									"CREATEFOLDER": {
										"enabled": "true",
										"description": "Create 'Case Folders' folder in root",
										"parentFolderPath": "/",
										"folderName": "Case Folders",
										"folderClassSymbolicName": "Folder"
									}
								},
								{
									"CREATEFOLDER": {
										"enabled": "true",
										"description": "Create 'Sample Test Folder TEST1' folder in 'Case Folders' folder",
										"parentFolderPath": "/Case Folders",
										"folderName": "Sample Test Folder TEST1",
										"folderClassSymbolicName": "SWAT_JAM_Case_Folder",
										"folderProperties": [
											{
												"Client_Name": "TEST1"
											},
											{
												"Case_Reference_ID": "TEST1"
											}
										]
									}
								},
								{
									"CREATEFOLDER": {
										"enabled": "true",
										"description": "Create 'Sample Test Folder TEST2' folder in 'Case Folders' folder",
										"parentFolderPath": "/Case Folders",
										"folderName": "Sample Test Folder TEST2",
										"folderClassSymbolicName": "SWAT_JAM_Case_Folder",
										"folderProperties": [
											{
												"Client_Name": "TEST2"
											},
											{
												"Case_Reference_ID": "TEST2"
											}
										]
									}
								}
							]
						}
					},
					{
						"ICN": {
							"enabled": "$enableConfigureSWATLabs_FNCM$",
							"description": "Import 'CLOS' desktop used in content lab",
							"name": "Import Desktop for CLOS into ICN",
							"relativeBasePath": "7_ICN",
							"subActions": [
								{
									"DOWNLOADRESOURCES": {
										"enabled": "$enableArtifactDownloadFromGit$",
										"description": "Download resources required for content lab for Navigator",
										"name": "Download ICN file",
										"replaceExistingFiles": true,
										"files": [
											{"url": "https://github.com/IBM/cp4ba-client-onboarding-scenario/raw/main/$cp4baVersion$/Solution%20Exports/Business%20Automation%20Navigator/CLOSDesktop.properties"}
										]
									}
								},
								{
									"IMPORTDESKTOP": {
										"enabled": "true",
										"description": "Import 'CLOS' desktop used in content lab",
										"enforceImport": false,
										"name": "CLOS",
										"file": "CLOSDesktop.properties"
									}
								}
							]
						}
					},
					{
						"BAA": {
							"enabled": "$enableConfigureSWATLabs_BAA$",
							"description": "Deploy 'Client Onboarding Template' BAA template used in BAA lab",
							"name": "Prepare App in Studio",
							"relativeBasePath": "7_BAA",
							"subActions": [
								{
									"DOWNLOADRESOURCES": {
										"enabled": "$enableArtifactDownloadFromGit$",
										"description": "Download resources required for the Apps lab",
										"name": "Download BAA file",
										"replaceExistingFiles": true,
										"files": [
											{"url": "https://github.com/IBM/cp4ba-client-onboarding-scenario/raw/main/$cp4baVersion$/Solution%20Exports/Business%20Automation%20Application/Client_Onboarding_Template.twx"},
											{"url": "https://github.com/IBM/cp4ba-client-onboarding-scenario/raw/main/$cp4baVersion$/Solution%20Exports/Business%20Automation%20Application/Client_Onboarding_Document_Upload.twx"}
										]
									}
								},
								{
									"EXTRACTTWXPROJECTINFO": {
										"enabled": "true",
										"description": "Extract project information from template file",
										"sourceTwxFile": "Client_Onboarding_Template.twx"
									}
								},
								{
									"IMPORTPROJECT": {
										"enabled": "true",
										"description": "Import 'Client Onboarding Template' BAA template into Studio",
										"name": "!solutionName!",
										"file": "!twxFileName!",
										"type": "!solutionType!",
										"acronym": "!solutionAcronym!",
										"snapshot": "!snapshotAcronym!",
										"maxBASQueryRetries": 3,
										"verbose": false
									}
								},
								{
									"EXTRACTTWXPROJECTINFO": {
										"enabled": "true",
										"description": "Extract project information from Client Onboarding Document Upload app file",
										"sourceTwxFile": "Client_Onboarding_Document_Upload.twx"
									}
								},
								{
									"IMPORTPROJECT": {
										"enabled": "true",
										"description": "Import 'Client Onboarding Document Upload' BAA template into Studio",
										"name": "!solutionName!",
										"file": "!twxFileName!",
										"type": "!solutionType!",
										"acronym": "!solutionAcronym!",
										"snapshot": "!snapshotAcronym!",
										"maxBASQueryRetries": 3,
										"verbose": false
									}
								},
								{
									"ADDCOLLABORATORS": {
										"enabled": "true",
										"description": "Add group for general users as readers to 'Client Onboarding Toolkit' APP TK",
										"name": "Client Onboarding Toolkit",
										"type": "APP_TK",
										"ignoreMissingPrincipals": true,
										"principals": [
											{
												"name": "$generalUsersGroupNameShort$",
												"type": "group",
												"permissions": {
													"read": true,
													"write": false,
													"administration": false
												}
											}
										]
									}
								}
							]
						}
					}
				]
			}
		}
	]
}