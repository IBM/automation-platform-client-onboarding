{
	"fileVersion": "1.0.26",
	"fileLocation": "https://raw.githubusercontent.com/IBM/cp4ba-client-onboarding-scenario/main/22.0.2/Deployment_Automation/Starter/DeployClientOnboardingEmbeddedGitea.json",
	"requiredToolVersion": ">=1.1.31 <1.2.0",
	"requiredCP4BAVersion": ">=22.2.0 <23.1.0",
	"requiredCP4BAPattern": "Starter",
	"actions": [
		{
			"CONTAINER": {
				"enabled": "$(ISSET(onboardUsersFile))$",
				"description": "Onboard new users to the Cloud Pak",
				"actions": [
					{
						"OCP": {
							"enabled": "true",
							"name": "Configure mail server and client in OCP",
							"relativeBasePath": "OpenShift",
							"subActions": [
								{
									"ADDUSERSGROUPSTOENV": {
										"enabled": "true",
										"description": "Add Users",
										"restartPod": true,
										"maximumNumPollsForRestart": "$$(modifyStarterLDAP_maximumNumPollsForRestart)$$",
										"sleepBetweenPollsInSecondsForRestart": "$$(modifyStarterLDAP_sleepBetweenPollsInSecondsForRestart)$$",
										"configFile": "$$(onboardUsersFile|default=)$$"
									}
								}
							]
						}
					}
				]
			}
		},
		{
			"CONTAINER": {
				"enabled": "$$(enableDeployEmailCapability)$$ && $$(!isLocalMailAvailable)$$",
				"description": "Deploy local email server and client",
				"actions": [
					{
						"OCP": {
							"enabled": "true",
							"name": "Configure mail server and client in OCP",
							"relativeBasePath": "OpenShift",
							"subActions": [
								{
									"DOWNLOADRESOURCES": {
										"enabled": "$$(enableArtifactDownloadFromGit)$$",
										"description": "Download resources required for OCP",
										"name": "Download OCP file",
										"replaceExistingFiles": true,
										"files": [
											{
												"url": "https://raw.githubusercontent.com/IBM/cp4ba-client-onboarding-scenario/main/$$(cp4baVersion)$$/Solution%20Exports/OpenShift/mailserver-tls-secret.yaml"
											},
											{
												"url": "https://raw.githubusercontent.com/IBM/cp4ba-client-onboarding-scenario/main/$$(cp4baVersion)$$/Solution%20Exports/OpenShift/mailserver.yaml"
											},
											{
												"url": "https://raw.githubusercontent.com/IBM/cp4ba-client-onboarding-scenario/main/$$(cp4baVersion)$$/Solution%20Exports/OpenShift/roundcube-pvc.yaml"
											},
											{
												"url": "https://raw.githubusercontent.com/IBM/cp4ba-client-onboarding-scenario/main/$$(cp4baVersion)$$/Solution%20Exports/OpenShift/roundcube-shared-secret.yaml"
											},
											{
												"url": "https://raw.githubusercontent.com/IBM/cp4ba-client-onboarding-scenario/main/$$(cp4baVersion)$$/Solution%20Exports/OpenShift/roundcube-db.yaml"
											},
											{
												"url": "https://raw.githubusercontent.com/IBM/cp4ba-client-onboarding-scenario/main/$$(cp4baVersion)$$/Solution%20Exports/OpenShift/roundcube-mail-deployment.yaml"
											},
											{
												"url": "https://raw.githubusercontent.com/IBM/cp4ba-client-onboarding-scenario/main/$$(cp4baVersion)$$/Solution%20Exports/OpenShift/roundcube-mail-config.yaml"
											},
											{
												"url": "https://raw.githubusercontent.com/IBM/cp4ba-client-onboarding-scenario/main/$$(cp4baVersion)$$/Solution%20Exports/OpenShift/roundcube-mail-service.yaml"
											},
											{
												"url": "https://raw.githubusercontent.com/IBM/cp4ba-client-onboarding-scenario/main/$$(cp4baVersion)$$/Solution%20Exports/OpenShift/roundcube-nginx.yaml"
											},
											{
												"url": "https://raw.githubusercontent.com/IBM/cp4ba-client-onboarding-scenario/main/$$(cp4baVersion)$$/Solution%20Exports/OpenShift/mailserver.pem"
											},
											{
												"url": "https://raw.githubusercontent.com/IBM/cp4ba-client-onboarding-scenario/main/$$(cp4baVersion)$$/Solution%20Exports/OpenShift/config.cert.inc.php"
											},
											{
												"url": "https://raw.githubusercontent.com/IBM/cp4ba-client-onboarding-scenario/main/$$(cp4baVersion)$$/Solution%20Exports/OpenShift/config.inc.php"
											}
										]
									}
								},
								{
									"MANAGEOCPNAMESPACE": {
										"enabled": "true",
										"description": "Add mail namespace",
										"action": "add",
										"namespaceName": "mail"
									}
								},
								{
									"MANAGEOCPCLUSTERROLEBINDING": {
										"enabled": "true",
										"description": "Add ClusterRoleBinding for 'privileged' and 'anyuid' cluster roles",
										"namespaceName": "mail",
										"clusterRoles": [
											{
												"action": "add",
												"clusterRoleName": "privileged"
											},
											{
												"action": "add",
												"clusterRoleName": "anyuid"
											}
										]
									}
								},
								{
									"MANAGEMAILUSERS": {
										"enabled": "true",
										"description": "Modify mail server users to match users and password from server LDIF file",
										"yamlFile": "mailserver.yaml",
										"synchronizeWithLDIF": true,
										"removeAllOtherUsers": true
									}
								},
								{
									"APPLYYAMLACTION": {
										"enabled": "true",
										"description": "Apply YAML files for mail server",
										"namespaceName": "mail",
										"storageClassName": "ocs-storagecluster-cephfs",
										"maxNumPollsForCompletionPVC": "$$(applyYAML_maxNumPollsForCompletionPVC)$$",
										"sleepInSecBetweenPollsPVC": "$$(applyYAML_sleepInSecBetweenPollsPVC)$$",
										"maxNumPollsForCompletionDeployment": "$$(applyYAML_maxNumPollsForCompletionDeployment)$$",
										"sleepInSecBetweenPollsDeployment": "$$(applyYAML_sleepInSecBetweenPollsDeployment)$$",
										"maxNumPollsForCompletionRoute": "$$(applyYAML_maxNumPollsForCompletionRoute)$$",
										"sleepInSecBetweenPollsRoute": "$$(applyYAML_sleepInSecBetweenPollsRoute)$$",
										"yamlFiles": [
											{
												"fileName": "mailserver-tls-secret.yaml"
											},
											{
												"fileName": "!yamlFileName!"
											}
										]
									}
								},
								{
									"APPLYYAMLACTION": {
										"enabled": "true",
										"description": "Apply YAML files for mail client",
										"namespaceName": "mail",
										"storageClassName": "ocs-storagecluster-cephfs",
										"maxNumPollsForCompletionPVC": "$$(applyYAML_maxNumPollsForCompletionPVC)$$",
										"sleepInSecBetweenPollsPVC": "$$(applyYAML_sleepInSecBetweenPollsPVC)$$",
										"maxNumPollsForCompletionDeployment": "$$(applyYAML_maxNumPollsForCompletionDeployment)$$",
										"sleepInSecBetweenPollsDeployment": "$$(applyYAML_sleepInSecBetweenPollsDeployment)$$",
										"maxNumPollsForCompletionRoute": "$$(applyYAML_maxNumPollsForCompletionRoute)$$",
										"sleepInSecBetweenPollsRoute": "$$(applyYAML_sleepInSecBetweenPollsRoute)$$",
										"yamlFiles": [
											{
												"fileName": "roundcube-pvc.yaml"
											},
											{
												"fileName": "roundcube-shared-secret.yaml"
											},
											{
												"fileName": "roundcube-mail-config.yaml"
											},
											{
												"fileName": "roundcube-db.yaml"
											},
											{
												"fileName": "roundcube-mail-deployment.yaml"
											}
										]
									}
								},
								{
									"COPYFILES": {
										"enabled": "true",
										"id": "copyFilesToFromPod",
										"description": "Copy files for mail client to and path file on pod",
										"delayBefore": 0,
										"namespaceName": "mail",
										"maxNumRetries": "$$(copyFiles_maxNumRetries)$$",
										"sleepInSecBetweenRetries": "$$(copyFiles_sleepInSecBetweenRetries)$$",
										"maxNumPollsForCompletion": "$$(copyFiles_maxNumPollsForCompletion)$$",
										"sleepInSecBetweenPolls": "$$(copyFiles_sleepInSecBetweenPolls)$$",
										"copyActions": [
											{
												"action": "toContainer",
												"podLabelName": "service",
												"podLabelSelector": "roundcubemail",
												"containerName": "roundcubemail",
												"localFileName": "mailserver.pem",
												"remotePath": "/var/www/html/config",
												"overExistingFile": false
											},
											{
												"action": "toContainer",
												"podLabelName": "service",
												"podLabelSelector": "roundcubemail",
												"containerName": "roundcubemail",
												"localFileName": "config.cert.inc.php",
												"remotePath": "/var/www/html/config",
												"overExistingFile": false
											},
											{
												"action": "fromContainer",
												"podLabelName": "service",
												"podLabelSelector": "roundcubemail",
												"containerName": "roundcubemail",
												"remotePath": "/var/www/html/config",
												"remoteFileName": "config.inc.php",
												"localFileName": "config.inc.php_orig",
												"overExistingFile": true,
												"restartPods": false,
												"fileEdit": {
													"tmpFileName": "config.inc.php_mod",
													"action": "afterLastEmptyLineCheckExists",
													"content": "    include(__DIR__ . '/config.cert.inc.php');",
													"copyBackWithOriginalName": true
												}
											}
										]
									}
								},
								{
									"MANAGEDEPLOYMENTS": {
										"enabled": "true",
										"description": "Delete 'roundcubemail' deployment after patching files in PVC",
										"dependentOnId": "copyFilesToFromPod",
										"dependencyType": "skip",
										"namespaceName": "mail",
										"maximumNumPollsForDeletion": "$$(applyYAML_maxNumPollsForCompletionDeployment)$$",
										"sleepBetweenPollsInSecondsForDeletion": "$$(applyYAML_sleepInSecBetweenPollsDeployment)$$",
										"deployments": [
											{
												"action": "delete",
												"deploymentName": "roundcubemail"
											}
										]
									}
								},
								{
									"APPLYYAMLACTION": {
										"enabled": "true",
										"description": "Apply remaining YAML files for mail client",
										"namespaceName": "mail",
										"storageClassName": "ocs-storagecluster-cephfs",
										"maxNumPollsForCompletionPVC": "$$(applyYAML_maxNumPollsForCompletionPVC)$$",
										"sleepInSecBetweenPollsPVC": "$$(applyYAML_sleepInSecBetweenPollsPVC)$$",
										"maxNumPollsForCompletionDeployment": "$$(applyYAML_maxNumPollsForCompletionDeployment)$$",
										"sleepInSecBetweenPollsDeployment": "$$(applyYAML_sleepInSecBetweenPollsDeployment)$$",
										"maxNumPollsForCompletionRoute": "$$(applyYAML_maxNumPollsForCompletionRoute)$$",
										"sleepInSecBetweenPollsRoute": "$$(applyYAML_sleepInSecBetweenPollsRoute)$$",
										"yamlFiles": [
											{
												"fileName": "roundcube-mail-deployment.yaml"
											},
											{
												"fileName": "roundcube-mail-service.yaml"
											},
											{
												"fileName": "roundcube-nginx.yaml"
											}
										]
									}
								},
								{
									"RELOADOCPCONFIGURATION": {
										"enabled": "true",
										"description": "Reload OCP Configuration for Deployment Tool after installing mail server and client",
										"skipIfPreviousAreSkipOrSucessSkip": true
									}
								}
							]
						}
					}
				]
			}
		},
		{
			"CONTAINER": {
				"enabled": "$$(enableConfigureSWATLabs)$$ && $$(enableConfigureSWATLabs_WF)$$ && $$(enableWFLabForBusinessUsers)$$",
				"description": "Configure environment so that user in group '$$(generalUsersGroupName)$$' can create WF solutions including case capability",
				"comment": "Container bundles activities to configure the environment for the WF lab for business users that should be executed before importing the WF solution",
				"actions": [
					{
						"OCP": {
							"enabled": "true",
							"description": "OCP - Add two groups containing both admin and general users group to LDIF, restart LDAP pod, and CPE pods",
							"subActions": [
								{
									"MODIFYSTARTERLDAP": {
										"enabled": "true",
										"description": "Modify LDAP by adding two groups used for P8 WF sub-system adding administrators and general users group to the groups",
										"id": "ModifyStarterLDAP",
										"restartPod": true,
										"maximumNumPollsForRestart": "$$(modifyStarterLDAP_maximumNumPollsForRestart)$$",
										"sleepBetweenPollsInSecondsForRestart": "$$(modifyStarterLDAP_sleepBetweenPollsInSecondsForRestart)$$",
										"entities": [
											{
												"action": "add",
												"type": "group",
												"dn": "cn=P8WFAdmins,dc=example,dc=org",
												"cn": "P8WFAdmins",
												"members": [
													{
														"action": "add",
														"dn": "$$(generalUsersGroupName)$$"
													},
													{
														"action": "add",
														"dn": "$$(cp4baAdminGroup)$$"
													}
												]
											},
											{
												"action": "add",
												"type": "group",
												"dn": "cn=P8WFConfigurators,dc=example,dc=org",
												"cn": "P8WFConfigurators",
												"members": [
													{
														"action": "add",
														"dn": "$$(generalUsersGroupName)$$"
													},
													{
														"action": "add",
														"dn": "$$(cp4baAdminGroup)$$"
													}
												]
											}
										]
									}
								},
								{
									"RESTARTPODS": {
										"enabled": "true",
										"description": "Restart CPE pods after LDAP was modified so it does not cache groups and group membership",
										"dependentOnId": "ModifyStarterLDAP",
										"dependencyType": "skip",
										"namespace": "$$(cp4baNamespace)$$",
										"labelName": "app",
										"labelValue": "$$(cp4baClusterName)$$-cpe-deploy",
										"maximumNumPollsForRestart": "$$(restartCPEPods_maximumNumPollsForRestart)$$",
										"sleepBetweenPollsInSecondsForRestart": "$$(restartCPEPods_sleepBetweenPollsInSecondsForRestart)$$"
									}
								}
							]
						}
					},
					{
						"WF": {
							"comment": "Add general user group '$$(generalUsersGroupShort)$$' to tw_admins, tw_authors, and project area to be able to create projects",
							"enabled": "true",
							"description": "WF - Add general user group '$$(generalUsersGroupShort)$$' to tw_authors and project area",
							"subActions": [
								{
									"MANAGEGROUPS": {
										"enabled": "true",
										"description": "Add general user group '$$(generalUsersGroupShort)$$' to tw_admins and tw_authors",
										"activities": [
											{
												"action": "AddMembers",
												"groupName": "tw_admins",
												"groups": [
													"$$(generalUsersGroupShort)$$"
												]
											},
											{
												"action": "AddMembers",
												"groupName": "tw_authors",
												"groups": [
													"$$(generalUsersGroupShort)$$"
												]
											}
										]
									}
								},
								{
									"MANAGEPROJECTAREA": {
										"enabled": "true",
										"description": "Add '$$(generalUsersGroupShort)$$' group to default Case Project Area",
										"useDefaultProjectArea": true,
										"security": [
											{
												"action": "AddMembers",
												"groups": [
													"$$(generalUsersGroupShort)$$"
												]
											}
										]
									}
								}
							]
						}
					},
					{
						"FNCM": {
							"enabled": "true",
							"description": "CPE - Modify object store security granting group '$$(generalUsersGroupName)$$' rights for Workflow lab in object store $$(BAW_DOS)$$",
							"objectStoreName": "$$(BAW_DOS)$$",
							"relativeBasePath": "FileNet Content Manager",
							"subActions": [
								{
									"MODIFYOBJECTSTORE": {
										"enabled": "true",
										"description": "Modify security for $$(BAW_DOS)$$ Object Store",
										"name": "Modify security for $$(BAW_DOS)$$ Object Store",
										"replaceAccessRights": false,
										"granteeSettings": [
											{
												"enabled": "true",
												"action": "Update",
												"granteeName": "$$(generalUsersGroupName)$$",
												"granteeType": "Group",
												"isNonCaseSensitive": true,
												"accessType": "Allow",
												"inheritableDepth": "No inheritance",
												"accessRights": "Full control, !Set owner of any object, !Modify all properties"
											}
										]
									}
								},
								{
									"ADDADMINTOOBJECTSTORE": {
										"enabled": "$$(isStarterDeployment)$$ || $$(isApolloDeployment)$$ || $$(isCloudPakDeployerDeployment)$$",
										"description": "Add general users group as admins to $$(BAW_DOS)$$ Object Store",
										"configMapName": "client-onboarding-state-admin-$$(BAW_DOS)$$-os",
										"granteeNames": [
											"$$(generalUsersGroupName)$$",
										],
										"updateTypes": "All",
										"message": "This activity may take up to minutes without visible progress"
									}
								}
							]
						}
					},
					{
						"FNCM": {
							"enabled": "true",
							"description": "CPE - Modify Workflow System Security Groups to allow '$$(generalUsersGroupName)$$' group to deploy case solutions and restart CPE pods to pick up P8 group changes",
							"objectStoreName": "$$(BAW_TOS)$$",
							"subActions": [
								{
									"MODIFYOBJECTSTORE": {
										"enabled": "true",
										"description": "Modify security for $$(BAW_TOS)$$ Object Store",
										"name": "Modify security for $$(BAW_TOS)$$ Object Store",
										"replaceAccessRights": false,
										"granteeSettings": [
											{
												"enabled": "true",
												"action": "Update",
												"granteeName": "$$(generalUsersGroupName)$$",
												"granteeType": "Group",
												"isNonCaseSensitive": true,
												"accessType": "Allow",
												"inheritableDepth": "No inheritance",
												"accessRights": "Full control"
											}
										]
									}
								},
								{
									"ADDADMINTOOBJECTSTORE": {
										"enabled": "$$(isStarterDeployment)$$ || $$(isApolloDeployment)$$ || $$(isCloudPakDeployerDeployment)$$",
										"description": "Add general users group as admins to $$(BAW_TOS)$$ Object Store",
										"configMapName": "client-onboarding-state-admin-$$(BAW_TOS)$$-os",
										"granteeNames": [
											"$$(generalUsersGroupName)$$",
										],
										"updateTypes": "All",
										"message": "This activity may take up to minutes without visible progress"
									}
								},
								{
									"MANAGEWFSECURITYGROUPS": {
										"enabled": "true",
										"description": "Manage WF System Security Groups",
										"administrationGroup": "P8WFAdmins",
										"configurationGroup": "P8WFConfigurators",
										"restartCPEPods": true,
										"maximumNumPollsForRestart": "$$(p8SecurityGroups_maximumNumPollsForRestart)$$",
										"sleepBetweenPollsInSecondsForRestart": "$$(p8SecurityGroups_sleepBetweenPollsInSecondsForRestart)$$"
									}
								}
							]
						}
					}
				]
			}
		},
		{
			"CONTAINER": {
				"comment": "This container wraps all actions to deploy the Client Onboarding scenario itself",
				"enabled": "$$(enableDeployClientOnboarding)$$",
				"description": "Deploy Client Onboarding Scenario",
				"actions": [
					{
						"OCP": {
							"enabled": "$$(enableDeployClientOnboarding_ADS)$$",
							"description": "Grant 'Deployed Decision Manager' role to admin user",
							"subActions": [
								{
									"PLATFORM_USERMGT": {
										"enabled": "true",
										"description": "Update Zen roles for admin user",
										"entities": [
											{
												"action": "update",
												"name": "$$(cp4baAdminUsr)$$",
												"roles": [
													"Deployed Decision Manager"
												]
											}
										]
									}
								}
							]
						}
					},
					{
						"ADS": {
							"enabled": "$$(enableDeployClientOnboarding_ADS)$$",
							"description": "ADS - Create and fully configure ADS project including Git, Deploy, & Publish",
							"decisionsPrjDisplayName": "Client Onboarding",
							"relativeBasePath": "Automation Decision Services",
							"maxBASQueryRetries": 5,
							"subActions": [
								{
									"DOWNLOADRESOURCES": {
										"enabled": "$$(enableArtifactDownloadFromGit)$$",
										"description": "Download resources required for ADS",
										"name": "Download ADS file",
										"replaceExistingFiles": true,
										"files": [
											{
												"url": "https://github.com/IBM/cp4ba-client-onboarding-scenario/raw/main/$$(cp4baVersion)$$/Solution%20Exports/Automation%20Decision%20Services/ClientOnboardingDecisions.zip"
											}
										]
									}
								},
								{
									"TESTCONNECTION": {
										"enabled": "true",
										"description": "Test ADS capability"
									}
								},
								{
									"CREATEGITREPO": {
										"enabled": "$$(!isADSAutoConnectToGit)$$",
										"description": "Create Git org and repo in internal Gitea",
										"orgName": "$$(adsGitOrg)$$",
										"repoName": "$$(adsGitRepo)$$",
										"repoDescription": "$$(adsGitRepoDescription)$$"
									}
								},
								{
									"CREATEPROJECT": {
										"enabled": "true",
										"description": "Create ADS project in Studio",
										"name": "Client Onboarding"
									}
								},
								{
									"CONNECTWITHGIT": {
										"enabled": "$$(!isADSAutoConnectToGit)$$",
										"description": "Connect ADS project to internal gitea repository",
										"gitRepoUrl": "!GITREPOURL!"
									}
								},
								{
									"IMPORTDECISIONSERVICES": {
										"enabled": "true",
										"description": "Import 'Client Onboarding Decisions' decision service",
										"decisionServiceName": "Client Onboarding Decisions",
										"file": "ClientOnboardingDecisions.zip"
									}
								},
								{
									"COMMITCHANGES": {
										"enabled": "true",
										"description": "Commit changes in ADS project to git",
										"commitMessage": "Initial automatic setup of Client Onboarding project",
										"maxCommitCompletionPolls": 20,
										"delayBetweenCommitCompletionPolls": 10
									}
								},
								{
									"VERSIONPROJECT": {
										"enabled": "true",
										"description": "Create a new version of the ADS project",
										"versionDescription": "Initial version of the Client Onboarding Decision Solution",
										"version": "1.0.0"
									}
								},
								{
									"DEPLOYPROJECT": {
										"enabled": "true",
										"description": "Deploy the version to the runtime",
										"decisionServiceName": "Client Onboarding Decisions",
										"version": "1.0.0",
										"maxDeployCompletionPolls": 60,
										"delayBetweenDeployCompletionPolls": 5
									}
								},
								{
									"PUBLISHAUTOMATIONSERVICES": {
										"enabled": "true",
										"description": "Publish the ADS decision service as an automation service",
										"skipRemainingSubactionOnFailure": "true",
										"snapshot": "1.0.0",
										"maxPublishCompletionPolls": "$$(publishAS_maxPublishCompletionPolls)$$",
										"delayBetweenPublishCompletionPolls": "$$(publishAS_delayBetweenPublishCompletionPolls)$$"
									}
								}
							]
						}
					},
					{
						"ADP": {
							"comment": "Tries to configure and deploy the sample ADP project and then extract its project Id. Action will not fail when an error occurs as downstream action can handle the absence of the projectId",
							"enabled": "$$(enableDeployClientOnboarding_ADP)$$",
							"description": "ADP - Configure and deploy default project and extract projectId",
							"skipRemainingSubactionOnFailure": "true",
							"relativeBasePath": "Automation Document Processing",
							"objectStoreName": "$$(adpObjectStore)$$",
							"projectDisplayName": "$$(adpProjectName)$$",
							"projectAcronym": "$$(adpProjectAcronym)$$",
							"subActions": [
								{
									"TESTCONNECTION": {
										"enabled": "true",
										"description": "Test ADP capability"
									}
								},
								{
									"SETMARKFORDEPLOYMENT": {
										"enabled": "true",
										"description": "Mark the UtilityBill class for deployment",
										"setUndeployForOthers": true,
										"types": [
											"UtilityBill"
										]
									}
								},
								{
									"DEFINEPROPERTIES": {
										"enabled": "true",
										"description": "Define the CustomerName and ServiceAddress property definitions",
										"propertyDefinitionsByType": {
											"UtilityBill": {
												"CustomerName": "ddCustomerName",
												"ServiceAddress": "ddServiceAddress"
											}
										}
									}
								},
								{
									"CREATEVERSION": {
										"enabled": "true",
										"description": "Create a new version of the ADP project",
										"versionComment": "Enabled Utility Bill and marked Customer Name and Service Address for deployment",
										"maxPollTimes": 20,
										"maxDelayBetweenPolls": 10
									}
								},
								{
									"DEPLOYVERSION": {
										"enabled": "true",
										"description": "Deploy the version of the ADP project",
										"maxPollTimes": 20,
										"maxDelayBetweenPolls": 10
									}
								},
								{
									"GETPROJECTID": {
										"enabled": "true",
										"description": "Get the project id of the deployed ADP project"
									}
								}
							]
						}
					},
					{
						"WF": {
							"comment": "ADP will be enabled if previous ADP action was successful otherwise ADP will be disabled",
							"enabled": "$$(enableDeployClientOnboarding_WF)$$",
							"description": "WF - Deploy and publish Client Onboarding solution",
							"relativeBasePath": "Business Automation Workflow",
							"subActions": [
								{
									"DOWNLOADRESOURCES": {
										"enabled": "$$(enableArtifactDownloadFromGit)$$",
										"description": "Download resources required for WF",
										"name": "Download Workflow file",
										"replaceExistingFiles": true,
										"files": [
											{
												"url": "https://github.com/IBM/cp4ba-client-onboarding-scenario/raw/main/$$(cp4baVersion)$$/Solution%20Exports/Business%20Automation%20Workflow/Client_Onboarding.twx"
											}
										]
									}
								},
								{
									"EXTRACTTWXPROJECTINFO": {
										"enabled": "true",
										"description": "Extract the project information from the Client Onboarding TWX file",
										"sourceTwxFile": "Client_Onboarding.twx"
									}
								},
								{
									"PATCHSOLUTION": {
										"enabled": "true",
										"description": "Patch the Environment Variables, especially enable/disable ADP depending on availability of ADP project ID and automation service as TWX was built in enterprise deployment but is used in starter deployment",
										"sourceTwxFile": "!twxFileName!",
										"environmentVariables": [
											{
												"adpEnabled": "$$(wf_cp_adpEnabled)$$ && $(ISSET(adpProjectId))$"
											},
											{
												"adpHost": "$(adpHost|default=)$"
											},
											{
												"adpUsername": "$(adpUsername|default=)$"
											},
											{
												"adpPassword": "$(adpPassword|default=)$"
											},
											{
												"adpProjectID": "$(adpProjectId|default=)$"
											},
											{
												"documentUploadPage": "$$(wf_cp_documentUploadPage)$$"
											},
											{
												"smtpHost": "§IF($(isLocalMailAvailable)$ && $$(ISNOTSET(wf_cp_emailPassword))$$)§($(localSmtpHost|default=)$)§ELSE§(smtp.gmail.com)ENDIF§"
											},
											{
												"smtpPort": "§IF($(isLocalMailAvailable)$ && $$(ISNOTSET(wf_cp_emailPassword))$$)§($(localSmtpPort|default=)$)§ELSE§(587)ENDIF§"
											},
											{
												"emailID": "$$(wf_cp_emailIDInternal)$$"
											},
											{
												"emailPassword": "§IF($$(ISSET(wf_cp_emailPassword))$$)§($$(wf_cp_emailPassword|default=)$$)§ELSEIF($(isLocalMailAvailable)$)§()§ELSE§(§FAIL(Gmail app key not provided but local mail server also not available))ENDIF§"
											},
											{
												"clientEmailAddress": "§IF($(isLocalMailAvailable)$ && $$(ISNOTSET(wf_cp_emailPassword))$$)§(<user>$(localMailDomain|default=)$)§ELSE§(focuscorpdemo@gmail.com)ENDIF§"
											},
											{
												"rpaBotExecutionUser": "$$(wf_cp_rpaBotExecutionUser)$$"
											},
											{
												"rpaServer": "$$(wf_cp_rpaServer)$$"
											},
											{
												"tosName": "$$(BAW_TOS)$$"
											}
										],
										"filePatchInfos": [
											{
												"tkName": "COTK",
												"name": "client_onboarding_decisions",
												"type": "process",
												"automationServiceMappings": {
													"project": {
														"cp4badmin.client_onboarding": "$$(cp4baAdminUsr)$$.client_onboarding"
													},
													"url": {
														"/ads/runtime/api/v1/deploymentSpaces/embedded/decisions/cp4badmin%252Fclient_onboarding%252Fclient_onboarding_decisions%252FclientOnboardingDecisionsDecisionService%252F1.0.0%252FclientOnboardingDecisionsDecisionService-1.0.0.jar": "/ads/runtime/api/v1/deploymentSpaces/embedded/decisions/$$(cp4baAdminUsr)$$%252Fclient_onboarding%252Fco_decisions%252FCODecisionsDecisionService%252F1.0.0%252FCODecisionsDecisionService-1.0.0.jar"
													}
												}
											}
										]
									}
								},
								{
									"INSTALLSOLUTION": {
										"enabled": "true",
										"description": "Install the patched Client Onboarding WF solution",
										"twxFile": "!patchedTWXFileName!",
										"paAcronym": "!projectAcronym!",
										"paSnapshot": "!snapshotAcronym!",
										"checkForUpdatedEnvironmentVariables": true
									}
								},
								{
									"DEPLOYCASESOLUTION": {
										"enabled": "true",
										"description": "Deploy the Case part of the Client Onboarding WF solution",
										"solutionName": "!solutionName!",
										"solutionAcronym": "!solutionAcronym!",
										"dosName": "$$(BAW_DOS)$$",
										"ignoreSolutionVersion": false,
										"maxDeployCompletionPolls": 20,
										"delayBetweenDeployCompletionPolls": 10
									}
								},
								{
									"PUBLISHAUTOMATIONSERVICES": {
										"enabled": "true",
										"description": "Publish the Client Onboarding WF Automation Service",
										"solutionName": "!solutionName!",
										"solutionAcronym": "!solutionAcronym!",
										"snapshot": "!snapshotAcronym!",
										"maxBASQueryRetries": 5,
										"maxPublishCompletionPolls": "$$(publishAS_maxPublishCompletionPolls)$$",
										"delayBetweenPublishCompletionPolls": "$$(publishAS_delayBetweenPublishCompletionPolls)$$"
									}
								},
								{
									"ADDCOLLABORATORS": {
										"enabled": "true",
										"description": "Adds general users group as read-only collaborators",
										"name": "Client Onboarding Toolkit",
										"acronym": "COTK",
										"type": "WF_TK",
										"ignoreMissingPrincipals": true,
										"maxBASQueryRetries": 5,
										"principals": [
											{
												"name": "$$(generalUsersGroupName)$$",
												"type": "group",
												"permissions": {
													"read": true,
													"write": false,
													"administration": false
												}
											}
										]
									}
								}
							]
						}
					},
					{
						"FNCM": {
							"comment": "Action needs to run after the Case-solution was imported",
							"enabled": "$$(enableDeployClientOnboarding_FNCM)$$",
							"description": "CPE - Update class security, create 'Client Documents' folder, and create documents",
							"replaceExistingDocuments": false,
							"objectStoreName": "$$(BAW_TOS)$$",
							"relativeBasePath": "FileNet Content Manager",
							"subActions": [
								{
									"DOWNLOADRESOURCES": {
										"enabled": "$$(enableArtifactDownloadFromGit)$$",
										"description": "Download resources required for FNCM",
										"name": "Download FNCM files",
										"replaceExistingFiles": true,
										"files": [
											{
												"url": "https://github.com/IBM/cp4ba-client-onboarding-scenario/raw/main/$$(cp4baVersion)$$/Solution%20Exports/FileNet%20Content%20Manager/Client%20Documents/Banking%20Information%20-%20Automation%20Elite%20Inc.pdf"
											},
											{
												"url": "https://github.com/IBM/cp4ba-client-onboarding-scenario/raw/main/$$(cp4baVersion)$$/Solution%20Exports/FileNet%20Content%20Manager/Client%20Documents/Certificate%20of%20Incorporation%20-%20Automation%20Elite%20Inc.pdf"
											},
											{
												"url": "https://github.com/IBM/cp4ba-client-onboarding-scenario/raw/main/$$(cp4baVersion)$$/Solution%20Exports/FileNet%20Content%20Manager/Client%20Documents/Utility%20Bill%20-%20Automation%20Elite%20Inc.pdf"
											},
											{
												"url": "https://github.com/IBM/cp4ba-client-onboarding-scenario/raw/main/$$(cp4baVersion)$$/Solution%20Exports/FileNet%20Content%20Manager/Client%20Documents/June%20Marie%20-%20Driver's%20License.png"
											},
											{
												"url": "https://github.com/IBM/cp4ba-client-onboarding-scenario/raw/main/$$(cp4baVersion)$$/Solution%20Exports/FileNet%20Content%20Manager/Client%20Documents/Legacy%20Consulting%20-%20Banking%20Information.pdf"
											},
											{
												"url": "https://github.com/IBM/cp4ba-client-onboarding-scenario/raw/main/$$(cp4baVersion)$$/Solution%20Exports/FileNet%20Content%20Manager/Client%20Documents/Legacy%20Consulting%20-%20Certificate%20of%20Incorporation.pdf"
											}
										]
									}
								},
								{
									"TESTCONNECTION": {
										"enabled": "true",
										"description": "Test FNCM availability"
									}
								},
								{
									"MODIFYOBJECTSTORE": {
										"enabled": "true",
										"description": "Add general users group and set security for so that case history works for all users",
										"replaceAccessRights": false,
										"granteeSettings": [
											{
												"enabled": "true",
												"action": "Atleast",
												"granteeName": "$$(generalUsersGroupName)$$",
												"granteeType": "Group",
												"isNonCaseSensitive": true,
												"accessType": "Allow",
												"inheritableDepth": "No inheritance",
												"accessRights": "Use object store, Set owner of any object, Read permissions"
											}
										]
									}
								},
								{
									"MODIFYCLASSSECURITY": {
										"enabled": "true",
										"description": "Update instance security and security settings for doc classes CO_ClientDocument, CO_BankingInformation, CO_UtilityBill for multi-user environment",
										"name": "Modify security for Client Onboarding classes",
										"classes": [
											{
												"enabled": "true",
												"classSymbolicName": "Document/CO_ClientDocument",
												"securityReplaceAccessRights": false,
												"granteeSettings": [
													{
														"enabled": "true",
														"granteeName": "$$(generalUsersGroupName)$$",
														"granteeType": "Group",
														"isNonCaseSensitive": true,
														"defaultInstanceSecurityAction": "Remove",
														"securityAction": "Update",
														"securityAccessType": "Allow",
														"securityInheritableDepth": "No inheritance",
														"securityAccessRights": "Modify properties"
													}
												]
											},
											{
												"enabled": "true",
												"classSymbolicName": "Document/CO_ClientDocument/CO_BankingInformation",
												"securityReplaceAccessRights": false,
												"granteeSettings": [
													{
														"enabled": "true",
														"granteeName": "$$(generalUsersGroupName)$$",
														"granteeType": "Group",
														"isNonCaseSensitive": true,
														"defaultInstanceSecurityAction": "Remove",
														"securityAction": "Update",
														"securityAccessType": "Allow",
														"securityInheritableDepth": "No inheritance",
														"securityAccessRights": "Modify properties"
													}
												]
											},
											{
												"enabled": "true",
												"classSymbolicName": "Document/CO_ClientDocument/CO_UtilityBill",
												"securityReplaceAccessRights": false,
												"granteeSettings": [
													{
														"enabled": "true",
														"granteeName": "$$(generalUsersGroupName)$$",
														"granteeType": "Group",
														"isNonCaseSensitive": true,
														"defaultInstanceSecurityAction": "Remove",
														"securityAction": "Update",
														"securityAccessType": "Allow",
														"securityInheritableDepth": "No inheritance",
														"securityAccessRights": "Modify properties"
													}
												]
											}
										]
									}
								},
								{
									"CREATEFOLDER": {
										"enabled": "true",
										"description": "Create 'Client documents' folder",
										"parentFolderPath": "/",
										"folderClassSymbolicName": "Folder",
										"folderName": "Client Documents"
									}
								},
								{
									"CREATEDOCUMENT": {
										"enabled": "true",
										"description": "Create 'Banking Information - Automation Elite Inc' doc",
										"replaceExistingDocument": false,
										"folderName": "/Client Documents",
										"docClass": "CO_BankingInformation",
										"docTitle": "Banking Information - Automation Elite Inc",
										"docProps": {
											"CO_ClientName": "Automation Elite Inc.",
											"CO_AccountNumber": "1179476345"
										},
										"file": "Banking Information - Automation Elite Inc.pdf",
										"fileContentType": "application/pdf"
									}
								},
								{
									"CREATEDOCUMENT": {
										"enabled": "true",
										"description": "Create 'Certificate of Incorporation - Automation Elite Inc' doc",
										"replaceExistingDocument": false,
										"folderName": "/Client Documents",
										"docClass": "CO_ClientDocument",
										"docTitle": "Certificate of Incorporation - Automation Elite Inc",
										"docProps": {
											"CO_ClientName": "Automation Elite Inc."
										},
										"file": "Certificate of Incorporation - Automation Elite Inc.pdf",
										"fileContentType": "application/pdf"
									}
								},
								{
									"CREATEDOCUMENT": {
										"enabled": "true",
										"description": "Create 'Utility Bill - Automation Elite Inc' doc",
										"replaceExistingDocument": false,
										"folderName": "/Client Documents",
										"docClass": "CO_UtilityBill",
										"docTitle": "Utility Bill - Automation Elite Inc",
										"docProps": {
											"CO_ClientName": "Automation Elite Inc.",
											"CO_ServiceAddress": "3974 Carson St, Lansing, MI 48911"
										},
										"file": "Utility Bill - Automation Elite Inc.pdf",
										"fileContentType": "application/pdf"
									}
								},
								{
									"CREATEDOCUMENT": {
										"enabled": "true",
										"description": "Create 'June Marie - Driver's License' doc",
										"replaceExistingDocument": false,
										"folderName": "/Client Documents",
										"docClass": "CO_ClientDocument",
										"docTitle": "June Marie - Driver's License",
										"docProps": {
											"CO_ClientName": "Automation Elite Inc."
										},
										"file": "June Marie - Driver's License.png",
										"fileContentType": "image/png"
									}
								},
								{
									"CREATEDOCUMENT": {
										"enabled": "true",
										"description": "Create 'Legacy Consulting - Banking Information' doc",
										"replaceExistingDocument": false,
										"folderName": "/Client Documents",
										"docClass": "CO_BankingInformation",
										"docTitle": "Legacy Consulting - Banking Information",
										"docProps": {
											"CO_ClientName": "Legacy Consulting",
											"CO_AccountNumber": "7250512345"
										},
										"file": "Legacy Consulting - Banking Information.pdf",
										"fileContentType": "application/pdf"
									}
								},
								{
									"CREATEDOCUMENT": {
										"enabled": "true",
										"description": "Create 'Legacy Consulting - Certificate of Incorporation' doc",
										"replaceExistingDocument": false,
										"folderName": "/Client Documents",
										"docClass": "CO_ClientDocument",
										"docTitle": "Legacy Consulting - Certificate of Incorporation",
										"docProps": {
											"CO_ClientName": "Legacy Consulting"
										},
										"file": "Legacy Consulting - Certificate of Incorporation.pdf",
										"fileContentType": "application/pdf"
									}
								}
							]
						}
					},
					{
						"ICN": {
							"comment": "Imports two desktops and the two applications and configures access to the first",
							"enabled": "$$(enableDeployClientOnboarding_BAA)$$",
							"description": "Navigator - Import apps and desktops",
							"name": "Prepare Apps and Desktops",
							"relativeBasePath": "Business Automation Navigator",
							"subActions": [
								{
									"DOWNLOADRESOURCES": {
										"enabled": "$$(enableArtifactDownloadFromGit)$$",
										"description": "Download resources required for Navigator",
										"name": "Download ICN files",
										"replaceExistingFiles": true,
										"files": [
											{
												"url": "https://github.com/IBM/cp4ba-client-onboarding-scenario/raw/main/$$(cp4baVersion)$$/Solution%20Exports/Business%20Automation%20Navigator/Workplace-$$(cp4baVersionWithFixpack)$$.zip",
												"useCurrentOrEarlierFileVersion": true
											},
											{
												"url": "https://github.com/IBM/cp4ba-client-onboarding-scenario/raw/main/$$(cp4baVersion)$$/Solution%20Exports/Business%20Automation%20Navigator/ClientOnboardingRequest.zip"
											},
											{
												"url": "https://github.com/IBM/cp4ba-client-onboarding-scenario/raw/main/$$(cp4baVersion)$$/Solution%20Exports/Business%20Automation%20Navigator/ClientOnboardingDocumentUpload.zip"
											},
											{
												"url": "https://github.com/IBM/cp4ba-client-onboarding-scenario/raw/main/$$(cp4baVersion)$$/Solution%20Exports/Business%20Automation%20Navigator/ClientOnboardingRequestDesktop.properties"
											},
											{
												"url": "https://github.com/IBM/cp4ba-client-onboarding-scenario/raw/main/$$(cp4baVersion)$$/Solution%20Exports/Business%20Automation%20Navigator/CODocumentUploadDesktop.properties"
											}
										]
									}
								},
								{
									"TESTCONNECTION": {
										"enabled": "true",
										"description": "Test Navigator availability"
									}
								},
								{
									"IMPORTAPPLICATION": {
										"enabled": "true",
										"description": "Import Workplace app",
										"appEngineAppConfigName": "APPENG0",
										"name": "Workplace",
										"useCurrentOrEarlierFileVersion": true,
										"file": "Workplace-$$(cp4baVersionWithFixpack)$$.zip"
									}
								},
								{
									"SETAPPPERMISSIONS": {
										"enabled": "true",
										"description": "Make Workplace app accessible for all authenticated users",
										"appEngineAppConfigName": "APPENG0",
										"name": "Workplace",
										"action": "update",
										"permissions": [
											{
												"name": "#AUTHENTICATED-USERS",
												"action": "add"
											}
										]
									}
								},
								{
									"PATCHAPPLICATION": {
										"enabled": "true",
										"description": "Patch 'Client Onboarding Request' app to work in current environment",
										"file": "ClientOnboardingRequest.zip",
										"simpleTextMappings": {
											"1": {
												"BAWTOS": "$$(BAW_TOS)$$"
											},
											"2": {
												"/ads/runtime/api/v1/deploymentSpaces/embedded/decisions/cp4badmin%252Fclient_onboarding%252Fclient_onboarding_decisions%252FclientOnboardingDecisionsDecisionService%252F1.0.0%252FclientOnboardingDecisionsDecisionService-1.0.0.jar": "/ads/runtime/api/v1/deploymentSpaces/embedded/decisions/$$(cp4baAdminUsr)$$%252Fclient_onboarding%252Fclient_onboarding_decisions%252FclientOnboardingDecisionsDecisionService%252F1.0.0%252FclientOnboardingDecisionsDecisionService-1.0.0.jar"
											},
											"3": {
												"cp4badmin": "$$(cp4baAdminUsr)$$"
											}
										}
									}
								},
								{
									"IMPORTAPPLICATION": {
										"enabled": "true",
										"description": "Import patched 'Client Onboarding Request' app",
										"appEngineAppConfigName": "APPENG0",
										"name": "Client Onboarding Request",
										"file": "!patchedZIPFileName!"
									}
								},
								{
									"SETAPPPERMISSIONS": {
										"enabled": "true",
										"description": "Make 'Client Onboarding Request' app accessible for all authenticated users",
										"appEngineAppConfigName": "APPENG0",
										"name": "Client Onboarding Request",
										"action": "update",
										"permissions": [
											{
												"name": "#AUTHENTICATED-USERS",
												"action": "add"
											}
										]
									}
								},
								{
									"IMPORTAPPLICATION": {
										"enabled": "true",
										"description": "Import 'Client Onboarding Document Upload' app",
										"appEngineAppConfigName": "APPENG0",
										"name": "Client Onboarding Document Upload",
										"file": "ClientOnboardingDocumentUpload.zip"
									}
								},
								{
									"PATCHDESKTOP": {
										"enabled": "true",
										"description": "Patch 'Client Onboarding Request' desktop exported from enterprise deployment to work in current deployment",
										"file": "ClientOnboardingRequestDesktop.properties",
										"simpleTextMappings": {
											"APPENG0": "APPENG0",
											"repositories=icmbawtos": "repositories=icm$$(BAW_TOS_LOWER)$$",
											"defaultRepository=icmbawtos": "defaultRepository=icm$$(BAW_TOS_LOWER)$$",
											"repository.navigator.icmbawtos": "&delete&|repository.navigator.icm$$(BAW_TOS_LOWER)$$"
										}
									}
								},
								{
									"IMPORTDESKTOP": {
										"enabled": "true",
										"description": "Import patched 'Client Onboarding Request' desktop",
										"enforceImport": false,
										"name": "Client Onboarding Request",
										"file": "!patchedDesktopPropertiesFileName!"
									}
								},
								{
									"PATCHDESKTOP": {
										"enabled": "true",
										"description": "Patch 'Client Onboarding Document Upload' desktop exported from enterprise deployment to work in current deployment",
										"file": "CODocumentUploadDesktop.properties",
										"simpleTextMappings": {
											"APPENG0": "APPENG0",
											"repositories=icmbawtos": "repositories=icm$$(BAW_TOS_LOWER)$$",
											"defaultRepository=icmbawtos": "defaultRepository=icm$$(BAW_TOS_LOWER)$$",
											"repository.navigator.icmbawtos": "&delete&|repository.navigator.icm$$(BAW_TOS_LOWER)$$"
										}
									}
								},
								{
									"IMPORTDESKTOP": {
										"enabled": "true",
										"description": "Import patched 'Client Onboarding Document Upload' desktop",
										"enforceImport": false,
										"name": "Client Onboarding Document Upload",
										"file": "!patchedDesktopPropertiesFileName!"
									}
								}
							]
						}
					},
					{
						"BAI": {
							"enabled": "$$(enableDeployClientOnboarding_BAI)$$",
							"description": "BAI - Populate the ADS, Process, and Case indices, create Client Onboarding goal and dashboard, and make dashboard visible for all users",
							"relativeBasePath": "Business Automation Insights",
							"subActions": [
								{
									"DOWNLOADRESOURCES": {
										"enabled": "$$(enableArtifactDownloadFromGit)$$",
										"description": "Download resources required for BAI",
										"name": "Download BAI files",
										"replaceExistingFiles": true,
										"files": [
											{
												"url": "https://github.com/IBM/cp4ba-client-onboarding-scenario/raw/main/$$(cp4baVersion)$$/Solution%20Exports/Business%20Automation%20Insights/case-data.json"
											},
											{
												"url": "https://github.com/IBM/cp4ba-client-onboarding-scenario/raw/main/$$(cp4baVersion)$$/Solution%20Exports/Business%20Automation%20Insights/process-data.json"
											},
											{
												"url": "https://github.com/IBM/cp4ba-client-onboarding-scenario/raw/main/$$(cp4baVersion)$$/Solution%20Exports/Business%20Automation%20Insights/ads-data.json"
											},
											{
												"url": "https://github.com/IBM/cp4ba-client-onboarding-scenario/raw/main/$$(cp4baVersion)$$/Solution%20Exports/Business%20Automation%20Insights/Client%20Onboarding%20Completed.json"
											},
											{
												"url": "https://github.com/IBM/cp4ba-client-onboarding-scenario/raw/main/$$(cp4baVersion)$$/Solution%20Exports/Business%20Automation%20Insights/finalDashboardLayout.json"
											}
										]
									}
								},
								{
									"TESTCONNECTION": {
										"enabled": "true",
										"description": "Test BAI capability"
									}
								},
								{
									"IMPORTDATA": {
										"enabled": "true",
										"description": "Populate Case data into ElasticSearch index",
										"clearUsedIndices": false,
										"name": "Case Data",
										"file": "case-data.json"
									}
								},
								{
									"IMPORTDATA": {
										"enabled": "true",
										"description": "Populate Process data into ElasticSearch index",
										"clearUsedIndices": false,
										"name": "Process Data",
										"file": "process-data.json"
									}
								},
								{
									"IMPORTDATA": {
										"enabled": "true",
										"description": "Populate ADS data into ElasticSearch index",
										"clearUsedIndices": false,
										"name": "ADS Data",
										"file": "ads-data.json"
									}
								},
								{
									"IMPORTDASHBOARD": {
										"enabled": "true",
										"description": "Import 'Client Onboarding Complete' dashboard",
										"name": "Client Onboarding Completed",
										"file": "Client Onboarding Completed.json",
										"keepId": false
									}
								},
								{
									"CREATEGOAL": {
										"enabled": "true",
										"description": "Create 'Client Onboarding KPI' goal",
										"goalName": "Focus Corp's top Client Onboarding KPI Completed",
										"goalDescription": "Focus on the three top KPI identified by senior management team",
										"goalCategory": "",
										"goalPriority": "High",
										"goalColor": "#6929c4"
									}
								},
								{
									"EXPORTFINALDASHBOARDLAYOUT": {
										"enabled": "false",
										"description": "Export the final layout after applying the goal manually to the dashboard (disabled by default)",
										"name": "Client Onboarding Completed",
										"file": "finalDashboardLayout.json"
									}
								},
								{
									"APPLYGOALSTOVISUALIZATIONS": {
										"enabled": "true",
										"description": "Apply the goal to the dashboard",
										"name": "Client Onboarding Completed",
										"layoutFile": "finalDashboardLayout.json",
										"visualizationGoalMapping": [
											{
												"visualizationName": "Average Revenue from Service Fees for Approved Clients",
												"goalName": "Focus Corp's top Client Onboarding KPI Completed"
											},
											{
												"visualizationName": "Highest Service Fee by Industry Sector",
												"goalName": "Focus Corp's top Client Onboarding KPI Completed"
											}
										]
									}
								},
								{
									"SETDASHBOARDVISIBILITY": {
										"enabled": "true",
										"description": "Make dashboard visible to all users",
										"name": "Client Onboarding Completed",
										"isShared": true
									}
								}
							]
						}
					}
				]
			}
		},
		{
			"CONTAINER": {
				"comment": "Container bundles all activities to configure the environment for the labs",
				"enabled": "$$(enableConfigureSWATLabs)$$",
				"description": "Apply additional steps to prepare environment for labs after Client Onboarding solution is deployed",
				"actions": [
					{
						"WF": {
							"enabled": "$$(enableConfigureSWATLabs_WF)$$",
							"description": "WF - Add read-collaborators to Client Onboarding, RPA, and ADP TKs for WF/RPA labs",
							"relativeBasePath": "Business Automation Workflow",
							"subActions": [
								{
									"ADDCOLLABORATORS": {
										"enabled": "true",
										"description": "Add the general users group to the collaborators of the Client Onboarding toolkit as reader",
										"name": "Client Onboarding Toolkit",
										"acronym": "COTK",
										"type": "WF_TK",
										"ignoreMissingPrincipals": true,
										"maxBASQueryRetries": 5,
										"principals": [
											{
												"name": "$$(generalUsersGroupName)$$",
												"type": "group",
												"permissions": {
													"read": true,
													"write": false,
													"administration": false
												}
											}
										]
									}
								},
								{
									"ADDCOLLABORATORS": {
										"enabled": "true",
										"description": "Add the general users group to the collaborators of the ADP toolkit as reader",
										"name": "ADP Utils",
										"acronym": "ADPU",
										"type": "WF_TK",
										"ignoreMissingPrincipals": true,
										"maxBASQueryRetries": 5,
										"principals": [
											{
												"name": "$$(generalUsersGroupName)$$",
												"type": "group",
												"permissions": {
													"read": true,
													"write": false,
													"administration": false
												}
											}
										]
									}
								},
								{
									"ADDCOLLABORATORS": {
										"enabled": "true",
										"description": "Add the general users group to the collaborators of the RPA toolkit as reader",
										"name": "IBM RPA Toolkit",
										"acronym": "IBMRPAT",
										"type": "WF_TK",
										"ignoreMissingPrincipals": true,
										"maxBASQueryRetries": 5,
										"principals": [
											{
												"name": "$$(generalUsersGroupName)$$",
												"type": "group",
												"permissions": {
													"read": true,
													"write": false,
													"administration": false
												}
											}
										]
									}
								}
							]
						}
					},
					{
						"FNCM": {
							"comment": "Steps that are required by all content labs",
							"enabled": "$$(enableConfigureSWATLabs_CONTENT_CPE)$$ || $$(enableConfigureSWATLabs_CONTENT_GQL)$$ || $$(enableConfigureSWATLabs_CONTENT_ICN)$$",
							"description": "CPE - Steps common to the CPE, GraphQL, and ICN labs: Enable CBR for OS, create index area, and enable CBR for document class in OS $$(BAW_DOCS)$$",
							"objectStoreName": "$$(BAW_DOCS)$$",
							"relativeBasePath": "FileNet Content Manager",
							"subActions": [
								{
									"CREATEINDEXAREA": {
										"enabled": "true",
										"description": "Create Index Area for object store to be able to enable text search for object store",
										"indexAreaName": "$$(BAW_DOCS_LOWER)$$_index_area"
									}
								},
								{
									"MODIFYOBJECTSTORE": {
										"enabled": "true",
										"description": "Modify text search setting and security for object store $$(BAW_DOCS)$$",
										"name": "Modify text search setting and security for object store $$(BAW_DOCS)$$",
										"defaultTextSearchIndexingLanguage": "en",
										"enableTextSearch": true,
										"replaceAccessRights": false,
										"granteeSettings": [
											{
												"enabled": "true",
												"action": "Update",
												"granteeName": "$$(generalUsersGroupName)$$",
												"granteeType": "Group",
												"isNonCaseSensitive": true,
												"accessType": "Allow",
												"inheritableDepth": "No inheritance",
												"accessRights": "Full control, !Set owner of any object, !Modify all properties"
											}
										]
									}
								},
								{
									"UPDATECLASSDEFINITION": {
										"enabled": "true",
										"description": "Ensure class definition for Document class has CBR enabled",
										"classSymbolicName": "Document",
										"enableCBR": true
									}
								}
							]
						}
					},
					{
						"FNCM": {
							"comment": "Steps that are only required by the CPE and GraphQL content labs",
							"enabled": "$$(enableConfigureSWATLabs_CONTENT_CPE)$$ || $$(enableConfigureSWATLabs_CONTENT_GQL)$$",
							"description": "CPE - Steps common for CPE und GraphQL labs: Modify object store search settings and security, create property templates, class, and create folders in object store $$(BAW_DOCS)$$",
							"replaceExistingDocuments": false,
							"objectStoreName": "$$(BAW_DOCS)$$",
							"relativeBasePath": "FileNet Content Manager",
							"subActions": [
								{
									"ADDADMINTOOBJECTSTORE": {
										"enabled": "$$(isStarterDeployment)$$ || $$(isApolloDeployment)$$ || $$(isCloudPakDeployerDeployment)$$",
										"description": "Add general users group as admins to $$(BAW_DOCS)$$ Object Store",
										"configMapName": "client-onboarding-state-admin-$$(BAW_DOCS)$$-os",
										"granteeNames": [
											"$$(generalUsersGroupName)$$",
										],
										"updateTypes": "All, !EntryTemplates",
										"exclusionsByType": [
											{
												"exclusionsType": "ClassDefinitions",
												"exclusions": [
													"/Document/EntryTemplate/"
												]
											},
											{
												"exclusionsType": "ClassDefinitionInstances",
												"exclusions": [
													"/Document/EntryTemplate/"
												]
											},
											{
												"exclusionsType": "ClassDefinitions",
												"exclusions": [
													"/Document/StoredSearch"
												]
											},
											{
												"exclusionsType": "ClassDefinitionInstances",
												"exclusions": [
													"/Document/StoredSearch"
												]
											}
										],
										"message": "This activity may take up to minutes without visible progress"
									}
								},
								{
									"CREATEPROPERTYTEMPLATE": {
										"enabled": "true",
										"description": "Predefine some of the property templates for the Client Document document class and its subclasses",
										"propertyTemplates": [
											{
												"name": "Client Name",
												"symbolicName": "SWAT_Client_Name",
												"dataType": "String",
												"cardinality": "Single",
												"additionalProperties": [
													{
														"MaximumLength": 40
													}
												]
											},
											{
												"name": "Reference ID",
												"symbolicName": "SWAT_Reference_ID",
												"dataType": "String",
												"cardinality": "Single",
												"additionalProperties": [
													{
														"MaximumLength": 10
													},
													{
														"IsValueRequired": true
													}
												]
											},
											{
												"name": "First Name",
												"symbolicName": "SWAT_First_Name",
												"dataType": "String",
												"cardinality": "Single",
												"additionalProperties": [
													{
														"MaximumLength": 40
													}
												]
											},
											{
												"name": "Last Name",
												"symbolicName": "SWAT_Last_Name",
												"dataType": "String",
												"cardinality": "Single",
												"additionalProperties": [
													{
														"MaximumLength": 40
													}
												]
											},
											{
												"name": "Identification Number",
												"symbolicName": "SWAT_Identification_Number",
												"dataType": "String",
												"cardinality": "Single",
												"additionalProperties": [
													{
														"MaximumLength": 32
													}
												]
											},
											{
												"name": "Account Number",
												"symbolicName": "SWAT_Account_Number",
												"dataType": "String",
												"cardinality": "Single",
												"additionalProperties": [
													{
														"MaximumLength": 40
													}
												]
											},
											{
												"name": "Routing Number",
												"symbolicName": "SWAT_Routing_Number",
												"dataType": "String",
												"cardinality": "Single",
												"additionalProperties": [
													{
														"MaximumLength": 40
													}
												]
											},
											{
												"name": "Bank Name",
												"symbolicName": "SWAT_Bank_Name",
												"dataType": "String",
												"cardinality": "Single",
												"additionalProperties": [
													{
														"MaximumLength": 40
													}
												]
											}
										]
									}
								},
								{
									"CREATECLASSDEFINITION": {
										"enabled": "true",
										"description": "Create new folder class 'SWAT Jam Case Folder' using previously created property templates",
										"className": "SWAT Jam Case Folder",
										"classSymbolicName": "SWAT_JAM_Case_Folder",
										"baseClassSymbolicName": "Folder",
										"propertyTemplateNames": [
											"SWAT_Reference_ID",
											"SWAT_Client_Name"
										]
									}
								},
								{
									"CREATEFOLDER": {
										"enabled": "true",
										"description": "Create 'Case Folders' folder in root",
										"parentFolderPath": "/",
										"folderName": "Case Folders",
										"folderClassSymbolicName": "Folder"
									}
								},
								{
									"CREATEFOLDER": {
										"enabled": "true",
										"description": "Create 'Sample Test Folder TEST1' folder in 'Case Folders' folder",
										"parentFolderPath": "/Case Folders",
										"folderName": "Sample Test Folder TEST1",
										"folderClassSymbolicName": "SWAT_JAM_Case_Folder",
										"folderProperties": [
											{
												"SWAT_Client_Name": "TEST1"
											},
											{
												"SWAT_Reference_ID": "TEST1"
											}
										]
									}
								},
								{
									"CREATEFOLDER": {
										"enabled": "true",
										"description": "Create 'Sample Test Folder TEST2' folder in 'Case Folders' folder",
										"parentFolderPath": "/Case Folders",
										"folderName": "Sample Test Folder TEST2",
										"folderClassSymbolicName": "SWAT_JAM_Case_Folder",
										"folderProperties": [
											{
												"SWAT_Client_Name": "TEST2"
											},
											{
												"SWAT_Reference_ID": "TEST2"
											}
										]
									}
								}
							]
						}
					},
					{
						"FNCM": {
							"comment": "Steps that are only required by the CPE content lab",
							"enabled": "$$(enableConfigureSWATLabs_CONTENT_CPE)$$",
							"description": "CPE - Steps unique to the CPE lab: Create storage policy in object store $$(BAW_DOCS)$$",
							"replaceExistingDocuments": false,
							"objectStoreName": "$$(BAW_DOCS)$$",
							"relativeBasePath": "FileNet Content Manager",
							"subActions": [
								{
									"CREATESTORAGEPOLICY": {
										"enabled": "true",
										"description": "Create ASA for the Documents object store",
										"storagePolicyName": "Default Advanced Storage Area",
										"storageAreaName": "$$(BAW_DOCS_LOWER)$$_storage",
										"ignoreCaseForStorageAreaName": true
									}
								}
							]
						}
					},
					{
						"FNCM": {
							"comment": "Steps that are only required by the GraphQL content lab",
							"enabled": "$$(enableConfigureSWATLabs_CONTENT_GQL)$$",
							"description": "GQL - Steps unique to the GraphQL lab: Create property templates, class definitions, folders, and document upload",
							"replaceExistingDocuments": false,
							"objectStoreName": "$$(BAW_DOCS)$$",
							"relativeBasePath": "FileNet Content Manager",
							"subActions": [
								{
									"DOWNLOADRESOURCES": {
										"enabled": "$$(enableArtifactDownloadFromGit)$$",
										"description": "Download resources required for FNCM",
										"name": "Download FNCM files",
										"replaceExistingFiles": true,
										"files": [
											{
												"url": "https://github.com/IBM/cp4ba-client-onboarding-scenario/raw/main/$$(cp4baVersion)$$/Solution%20Exports/FileNet%20Content%20Manager/Client%20Documents/Banking%20Information%20-%20Automation%20Elite%20Inc.pdf"
											},
											{
												"url": "https://github.com/IBM/cp4ba-client-onboarding-scenario/raw/main/$$(cp4baVersion)$$/Solution%20Exports/FileNet%20Content%20Manager/Client%20Documents/Certificate%20of%20Incorporation%20-%20Automation%20Elite%20Inc.pdf"
											},
											{
												"url": "https://github.com/IBM/cp4ba-client-onboarding-scenario/raw/main/$$(cp4baVersion)$$/Solution%20Exports/FileNet%20Content%20Manager/Client%20Documents/Utility%20Bill%20-%20Automation%20Elite%20Inc.pdf"
											},
											{
												"url": "https://github.com/IBM/cp4ba-client-onboarding-scenario/raw/main/$$(cp4baVersion)$$/Solution%20Exports/FileNet%20Content%20Manager/Client%20Documents/June%20Marie%20-%20Driver's%20License.png"
											},
											{
												"url": "https://github.com/IBM/cp4ba-client-onboarding-scenario/raw/main/$$(cp4baVersion)$$/Solution%20Exports/FileNet%20Content%20Manager/Client%20Documents/Legacy%20Consulting%20-%20Banking%20Information.pdf"
											},
											{
												"url": "https://github.com/IBM/cp4ba-client-onboarding-scenario/raw/main/$$(cp4baVersion)$$/Solution%20Exports/FileNet%20Content%20Manager/Client%20Documents/Legacy%20Consulting%20-%20Certificate%20of%20Incorporation.pdf"
											}
										]
									}
								},
								{
									"CREATEPROPERTYTEMPLATE": {
										"enabled": "true",
										"description": "Define Property Templates for GraphQL lab",
										"propertyTemplates": [
											{
												"name": "SOLUTION Account Type",
												"symbolicName": "SOLUTION_Account_Type",
												"dataType": "String",
												"cardinality": "Single",
												"additionalProperties": [
													{
														"MaximumLength": 10
													}
												]
											},
											{
												"name": "SOLUTION Date Of Birth",
												"symbolicName": "SOLUTION_Date_Of_Birth",
												"dataType": "Date",
												"cardinality": "Single",
												"additionalProperties": [
													{
														"IsDateOnly": true
													}
												]
											}
										]
									}
								},
								{
									"CREATECLASSDEFINITION": {
										"enabled": "true",
										"description": "Create new folder class 'SOLUTION Client Document' using previously created property templates",
										"className": "SOLUTION Client Document",
										"classSymbolicName": "SOLUTION_Client_Document",
										"baseClassSymbolicName": "Document",
										"propertyTemplateNames": [
											"SWAT_Reference_ID",
											"SWAT_Client_Name"
										],
										"enableCBR": true
									}
								},
								{
									"CREATECLASSDEFINITION": {
										"enabled": "true",
										"description": "Create new folder class 'SOLUTION Client Information' using previously created property templates",
										"className": "SOLUTION Client Information",
										"classSymbolicName": "SOLUTION_Client_Information",
										"baseClassSymbolicName": "SOLUTION_Client_Document",
										"propertyTemplateNames": [
											"SOLUTION_Date_Of_Birth",
											"SWAT_First_Name",
											"SWAT_Last_Name",
											"SWAT_Identification_Number"
										],
										"enableCBR": true
									}
								},
								{
									"CREATECLASSDEFINITION": {
										"enabled": "true",
										"description": "Create new folder class 'SOLUTION Bank Information' using previously created property templates",
										"className": "SOLUTION Bank Information",
										"classSymbolicName": "SOLUTION_Bank_Information",
										"baseClassSymbolicName": "SOLUTION_Client_Document",
										"propertyTemplateNames": [
											"SWAT_Account_Number",
											"SWAT_Routing_Number",
											"SWAT_Bank_Name",
											"SOLUTION_Account_Type"
										],
										"enableCBR": true
									}
								},
								{
									"CREATEFOLDER": {
										"enabled": "true",
										"description": "Create 'SOLUTION Client Onboarding' folder in root",
										"parentFolderPath": "/",
										"folderName": "SOLUTION Client Onboarding",
										"folderClassSymbolicName": "Folder"
									}
								},
								{
									"CREATEDOCUMENT": {
										"enabled": "true",
										"description": "Create 'Banking Information - Automation Elite Inc' doc",
										"replaceExistingDocument": false,
										"folderName": "/SOLUTION Client Onboarding",
										"docClass": "SOLUTION_Bank_Information",
										"docTitle": "Banking Information - Automation Elite Inc",
										"docProps": {
											"SWAT_Reference_ID": "1000",
											"SWAT_Client_Name": "Automation Elite Inc.",
											"SWAT_Account_Number": "1179476345",
											"SOLUTION_Account_Type": "Checking",
											"SWAT_Routing_Number": "12658642",
											"SWAT_Bank_Name": "Automation Elite Bank"
										},
										"file": "Banking Information - Automation Elite Inc.pdf",
										"fileContentType": "application/pdf"
									}
								},
								{
									"CREATEDOCUMENT": {
										"enabled": "true",
										"description": "Create 'Certificate of Incorporation - Automation Elite Inc' doc",
										"replaceExistingDocument": false,
										"folderName": "/SOLUTION Client Onboarding",
										"docClass": "SOLUTION_Client_Document",
										"docTitle": "Certificate of Incorporation - Automation Elite Inc",
										"docProps": {
											"SWAT_Reference_ID": "1000",
											"SWAT_Client_Name": "Automation Elite Inc."
										},
										"file": "Certificate of Incorporation - Automation Elite Inc.pdf",
										"fileContentType": "application/pdf"
									}
								},
								{
									"CREATEDOCUMENT": {
										"enabled": "true",
										"description": "Create 'June Marie - Driver's License' doc",
										"replaceExistingDocument": false,
										"folderName": "/SOLUTION Client Onboarding",
										"docClass": "SOLUTION_Client_Information",
										"docTitle": "June Marie - Driver's License",
										"docProps": {
											"SWAT_Reference_ID": "1000",
											"SWAT_Client_Name": "Automation Elite Inc.",
											"SWAT_First_Name": "June",
											"SWAT_Last_Name": "Marie",
											"SWAT_Identification_Number": "455688599267004"
										},
										"file": "June Marie - Driver's License.png",
										"fileContentType": "image/png"
									}
								},
								{
									"CREATEDOCUMENT": {
										"enabled": "true",
										"description": "Create 'Legacy Consulting - Banking Information' doc",
										"replaceExistingDocument": false,
										"folderName": "/SOLUTION Client Onboarding",
										"docClass": "SOLUTION_Bank_Information",
										"docTitle": "Legacy Consulting - Banking Information",
										"docProps": {
											"SWAT_Reference_ID": "2000",
											"SWAT_Client_Name": "Legacy Consulting",
											"SWAT_Account_Number": "7250512345",
											"SOLUTION_Account_Type": "Saving",
											"SWAT_Routing_Number": "2547642",
											"SWAT_Bank_Name": "Legacy Bank"
										},
										"file": "Legacy Consulting - Banking Information.pdf",
										"fileContentType": "application/pdf"
									}
								},
								{
									"CREATEDOCUMENT": {
										"enabled": "true",
										"description": "Create 'Legacy Consulting - Certificate of Incorporation' doc",
										"replaceExistingDocument": false,
										"folderName": "/SOLUTION Client Onboarding",
										"docClass": "SOLUTION_Client_Document",
										"docTitle": "Legacy Consulting - Certificate of Incorporation",
										"docProps": {
											"SWAT_Reference_ID": "2000",
											"SWAT_Client_Name": "Legacy Consulting"
										},
										"file": "Legacy Consulting - Certificate of Incorporation.pdf",
										"fileContentType": "application/pdf"
									}
								}
							]
						}
					},
					{
						"FNCM": {
							"comment": "Steps that are only required by the ICN content lab",
							"enabled": "$$(enableConfigureSWATLabs_CONTENT_ICN)$$",
							"description": "CPE - Create property templates and classes for the ICN lab in object store $$(BAW_DOCS)$$",
							"replaceExistingDocuments": false,
							"objectStoreName": "$$(BAW_DOCS)$$",
							"relativeBasePath": "FileNet Content Manager",
							"subActions": [
								{
									"CREATEPROPERTYTEMPLATE": {
										"enabled": "true",
										"description": "Define three property templates for usage in document classes",
										"propertyTemplates": [
											{
												"name": "Client Name",
												"symbolicName": "Client_Name",
												"dataType": "String",
												"cardinality": "Single"
											},
											{
												"name": "Reference ID",
												"symbolicName": "ReferenceID",
												"dataType": "String",
												"cardinality": "Single"
											},
											{
												"name": "Service Address",
												"symbolicName": "ServiceAddress",
												"dataType": "String",
												"cardinality": "Single"
											}
										]
									}
								},
								{
									"CREATECLASSDEFINITION": {
										"enabled": "true",
										"description": "Create new document class 'Client Document' using previously created property templates",
										"className": "Client Document",
										"classSymbolicName": "ClientDocument",
										"baseClassSymbolicName": "Document",
										"propertyTemplateNames": [
											"Client_Name",
											"ReferenceID"
										],
										"enableCBR": true
									}
								},
								{
									"CREATECLASSDEFINITION": {
										"enabled": "true",
										"description": "Create new document class 'Utility Bill' using previously created property templates",
										"className": "Utility Bill",
										"classSymbolicName": "UtilityBill",
										"baseClassSymbolicName": "ClientDocument",
										"propertyTemplateNames": [
											"ServiceAddress"
										],
										"enableCBR": true
									}
								}
							]
						}
					},
					{
						"OCP": {
							"comment": "Steps that are only required by the ICN content lab",
							"enabled": "$$(enableConfigureSWATLabs_CONTENT_ICN)$$",
							"name": "Copy ICN custom plugin to plugins folder in ICN pod",
							"relativeBasePath": "Business Automation Navigator",
							"subActions": [
								{
									"DOWNLOADRESOURCES": {
										"enabled": "$$(enableArtifactDownloadFromGit)$$",
										"description": "Download resources required for OCP",
										"name": "Download custom plugin file",
										"replaceExistingFiles": true,
										"files": [
											{
												"url": "https://github.com/IBM/cp4ba-client-onboarding-scenario/raw/main/$$(cp4baVersion)$$/Solution%20Exports/Business%20Automation%20Navigator/edsDataSourceSamplePlugin.jar"
											}
										]
									}
								},
								{
									"COPYFILES": {
										"enabled": "true",
										"description": "Copy custom plugin file to navigator pod",
										"delayBefore": 0,
										"namespaceName": "$$(cp4baNamespace)$$",
										"maxNumRetries": "$$(copyFiles_maxNumRetries)$$",
										"sleepInSecBetweenRetries": "$$(copyFiles_sleepInSecBetweenRetries)$$",
										"maxNumPollsForCompletion": "$$(copyFiles_maxNumPollsForCompletion)$$",
										"sleepInSecBetweenPolls": "$$(copyFiles_sleepInSecBetweenPolls)$$",
										"copyActions": [
											{
												"action": "toContainer",
												"podLabelName": "app",
												"podLabelSelector": "$$(cp4baClusterName)$$-navigator-deploy",
												"containerName": "$$(cp4baClusterName)$$-navigator-deploy",
												"localFileName": "edsDataSourceSamplePlugin.jar",
												"remotePath": "/opt/ibm/plugins",
												"overExistingFile": false
											}
										]
									}
								}
							]
						}
					},
					{
						"ICN": {
							"comment": "Steps that required by both the CPE & ICN content labs",
							"enabled": "$$(enableConfigureSWATLabs_CONTENT_CPE)$$ || $$(enableConfigureSWATLabs_CONTENT_ICN)$$",
							"name": "Import ICN Desktop for Content/ICN lab into ICN",
							"description": "Navigator - Import 'ICN' desktop used in Content/ICN labs (for object store $$(BAW_DOCS)$$)",
							"relativeBasePath": "Business Automation Navigator",
							"subActions": [
								{
									"DOWNLOADRESOURCES": {
										"enabled": "$$(enableArtifactDownloadFromGit)$$",
										"description": "Download resources required for Content/ICN lab for Navigator",
										"name": "Download ICN file",
										"replaceExistingFiles": true,
										"files": [
											{
												"url": "https://github.com/IBM/cp4ba-client-onboarding-scenario/raw/main/$$(cp4baVersion)$$/Solution%20Exports/Business%20Automation%20Navigator/ICNDesktop.properties"
											}
										]
									}
								},
								{
									"DETERMINEREPONAMEFROMOBJECTSTORE": {
										"enabled": "true",
										"description": "Determine ICN repository information based on object store symbolic name",
										"osSymbolicName": "$$(BAW_DOCS)$$"
									}
								},
								{
									"PATCHDESKTOP": {
										"enabled": "true",
										"description": "Patch 'ICN' desktop exported from enterprise deployment to work in current deployment",
										"file": "ICNDesktop.properties",
										"simpleTextMappings": {
											"CONTENTrepo": "$(REPOSITORY_ID)$",
											"https://icp4adeploy-cpe-stateless-svc:9443": "$$(cpe-stlessSrvURL)$$",
											"https://icp4adeploy-bastudio-service.ibm-cp4ba.svc:443": "$$(bastudioSRVURL)$$",
											"cpd-ibm-cp4ba.apps.swat01.cp.fyre.ibm.com": "$$(cpdURLWithoutProtocol)$$"
										}
									}
								},
								{
									"IMPORTDESKTOP": {
										"enabled": "true",
										"description": "Import 'ICN' desktop used in Content/ICN lab (for object store $$(BAW_DOCS)$$)",
										"enforceImport": false,
										"name": "ICN",
										"file": "!patchedDesktopPropertiesFileName!"
									}
								},
								{
									"MANAGEDESKTOP": {
										"enabled": "true",
										"description": "Update 'ICN' desktop to use desktop email client",
										"desktopName": "ICN",
										"action": "update",
										"enabledDesktopEmailClient": true
									}
								}
							]
						}
					},
					{
						"ICN": {
							"comment": "Steps that are only required by the ICN content lab",
							"enabled": "$$(enableConfigureSWATLabs_CONTENT_ICN)$$",
							"name": "Import ICN Desktop for Content/ICN lab into ICN",
							"description": "Navigator - Enable entry template, redaction, edit services, register plugins and redactions for object store $$(BAW_DOCS)$$",
							"relativeBasePath": "Business Automation Navigator",
							"subActions": [
								{
									"DETERMINEREPONAMEFROMOBJECTSTORE": {
										"enabled": "true",
										"description": "Determine ICN repository information based on object store symbolic name",
										"osSymbolicName": "$$(BAW_DOCS)$$"
									}
								},
								{
									"UPDATEP8REPOSETTINGS": {
										"enabled": "true",
										"description": "Update P8 repository settings to enable Entry Template Management, Redaction, and Edit Services",
										"repoId": "$(REPOSITORY_ID)$",
										"allowEntryTemplateManagement": true,
										"enableRedaction": true,
										"allowMergeSplitForRoleBasedRedaction": true,
										"deliverRedactedPDFAsPDF": false,
										"enableEditService": true
									}
								},
								{
									"MANAGEPLUGINS": {
										"enabled": "true",
										"description": "Add custom EDS data source plugin",
										"action": "add",
										"pluginName": "EDS Data Source",
										"jarFilePath": "/opt/ibm/plugins/edsDataSourceSamplePlugin.jar",
										"configParameters": {
											"param1Field": "ClientDocument"
										}
									}
								},
								{
									"MANAGEPLUGINS": {
										"enabled": "true",
										"description": "Add EDS base plugin referencing custom plugin",
										"action": "add",
										"pluginName": "External Data Services Support",
										"jarFilePath": "/opt/ibm/intPlugins/eDS/edsPlugin.jar",
										"edsIsRequired": false,
										"dataSourcePluginName": "EDS Data Source"
									}
								},
								{
									"MANAGEREDACTION": {
										"enabled": "true",
										"description": "Manage role-based redaction for driver license for admin users for 'CONTENT' repository",
										"repository": "$(REPOSITORY_ID)$",
										"reverseOrder": false,
										"redactionReasons": [
											{
												"action": "add",
												"name": "Driver License Number admins",
												"description": "Hide the DL number"
											}
										],
										"redactionRoles": [
											{
												"action": "add",
												"type": "Viewer",
												"name": "viewer group admins",
												"description": "this viewer group cannot see the sensitive information",
												"entities": [
													{
														"action": "add",
														"entityName": "GeneralUsers",
														"entityType": "Group",
														"permission": "Allow"
													}
												]
											},
											{
												"action": "add",
												"type": "Editor",
												"name": "Editor user group roles admins",
												"description": "this user group helps to redact the sensitive information",
												"entities": [
													{
														"action": "add",
														"entityName": "P8Administrators",
														"entityType": "Group",
														"permission": "Allow"
													}
												]
											}
										],
										"redactionPolicies": [
											{
												"action": "add",
												"name": "Driver License Policy Admins",
												"description": "Hide the DL sensitive information",
												"reasons": [
													{
														"action": "add",
														"name": "Driver License Number admins"
													}
												],
												"editors": [
													{
														"action": "add",
														"name": "Editor user group roles admins"
													}
												],
												"viewers": [
													{
														"action": "add",
														"name": "viewer group admins"
													}
												]
											}
										]
									}
								}
							]
						}
					},
					{
						"BAA": {
							"enabled": "$$(enableConfigureSWATLabs_BAA)$$",
							"description": "BAA - Prepare APP in Studio for BAA lab",
							"relativeBasePath": "Business Automation Application",
							"subActions": [
								{
									"DOWNLOADRESOURCES": {
										"enabled": "$$(enableArtifactDownloadFromGit)$$",
										"description": "Download resources required for the Apps lab",
										"name": "Download BAA file",
										"replaceExistingFiles": true,
										"files": [
											{
												"url": "https://github.com/IBM/cp4ba-client-onboarding-scenario/raw/main/$$(cp4baVersion)$$/Solution%20Exports/Business%20Automation%20Application/Client_Onboarding_Template.twx"
											},
											{
												"url": "https://github.com/IBM/cp4ba-client-onboarding-scenario/raw/main/$$(cp4baVersion)$$/Solution%20Exports/Business%20Automation%20Application/Client_Onboarding_Document_Upload.twx"
											}
										]
									}
								},
								{
									"EXTRACTTWXPROJECTINFO": {
										"enabled": "true",
										"description": "Extract project information from template file",
										"sourceTwxFile": "Client_Onboarding_Template.twx"
									}
								},
								{
									"PATCHSOLUTION": {
										"enabled": "true",
										"description": "Patch the automation service to call ADS to match the user with which the ADS project got imported",
										"sourceTwxFile": "!twxFileName!",
										"filePatchInfos": [
											{
												"name": "client_onboarding_decisions",
												"type": "process",
												"automationServiceMappings": {
													"project": {
														"cp4badmin.client_onboarding": "$$(cp4baAdminUsr)$$.client_onboarding"
													},
													"url": {
														"/ads/runtime/api/v1/deploymentSpaces/embedded/decisions/cp4badmin%252Fclient_onboarding%252Fclient_onboarding_decisions%252FclientOnboardingDecisionsDecisionService%252F1.0.0%252FclientOnboardingDecisionsDecisionService-1.0.0.jar": "/ads/runtime/api/v1/deploymentSpaces/embedded/decisions/$$(cp4baAdminUsr)$$%252Fclient_onboarding%252Fclient_onboarding_decisions%252FclientOnboardingDecisionsDecisionService%252F1.0.0%252FclientOnboardingDecisionsDecisionService-1.0.0.jar"
													}
												}
											}
										]
									}
								},
								{
									"IMPORTPROJECT": {
										"enabled": "true",
										"description": "Import 'Client Onboarding Template' BAA template into Studio",
										"name": "!solutionName!",
										"file": "!patchedTWXFileName!",
										"type": "!solutionType!",
										"acronym": "!solutionAcronym!",
										"snapshot": "!snapshotAcronym!",
										"maxBASQueryRetries": 3,
										"verbose": false
									}
								},
								{
									"EXTRACTTWXPROJECTINFO": {
										"enabled": "true",
										"description": "Extract project information from Client Onboarding Document Upload app file",
										"sourceTwxFile": "Client_Onboarding_Document_Upload.twx"
									}
								},
								{
									"IMPORTPROJECT": {
										"enabled": "true",
										"description": "Import 'Client Onboarding Document Upload' BAA template into Studio",
										"name": "!solutionName!",
										"file": "!twxFileName!",
										"type": "!solutionType!",
										"acronym": "!solutionAcronym!",
										"snapshot": "!snapshotAcronym!",
										"maxBASQueryRetries": 3,
										"verbose": false
									}
								},
								{
									"ADDCOLLABORATORS": {
										"enabled": "true",
										"description": "Add group for general users as readers to 'Client Onboarding Toolkit' APP TK",
										"name": "Client Onboarding Toolkit",
										"acronym": "COTK2",
										"type": "APP_TK",
										"ignoreMissingPrincipals": true,
										"principals": [
											{
												"name": "$$(generalUsersGroupName)$$",
												"type": "group",
												"permissions": {
													"read": true,
													"write": false,
													"administration": false
												}
											}
										]
									}
								}
							]
						}
					}
				]
			}
		}
	]
}